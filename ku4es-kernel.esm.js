class t{static isNull(t){return null===t}static isEmpty(e){return t.isString(e)&&""===e||t.isArray(e)&&e.length<1||t.isObjectLiteral(e)&&Object.keys(e).length<1}static isUndefined(t){return void 0===t}static isZero(t){return 0===t}static exists(e){return!(t.isUndefined(e)||t.isNull(e))}static isNullOrEmpty(e){return!t.exists(e)||t.isEmpty(e)}static isArray(t){return Array.isArray(t)}static isBool(t){return"boolean"==typeof t}static isTrue(e){return t.isBool(e)&&!0===e}static isFalse(e){return t.isBool(e)&&!1===e}static isDate(t){return t instanceof Date}static isNumber(t){return("number"==typeof t||t instanceof Number)&&!isNaN(t)}static isEven(t){return this.isNumber(t)&&!this.isZero(t)&&t%2==0}static isOdd(t){return this.isNumber(t)&&!this.isZero(t)&&!this.isEven(t)}static isString(t){return"string"==typeof t||t instanceof String}static isFunction(t){return t instanceof Function}static isObject(e){return t.exists(e)&&"object"==typeof e&&!(t.isBool(e)||t.isNumber(e)||t.isDate(e)||t.isArray(e)||t.isString(e)||t.isFunction(e))}static isObjectLiteral(e){return t.isObject(e)&&e.constructor==={}.constructor}static isTruthy(e){return!t.isFalsy(e)}static isFalsy(e){return t.isZero(e)||t.isFalse(e)||t.isNullOrEmpty(e)||isNaN(e)}}function e(...t){return"".concat(...t)}function r(t,...e){return e.reduce((t,e,r)=>t.replace(new RegExp(`\\{${r}\\}`,"g"),e.toString()),t)}function s(t){return i(n(t))}function i(e){return t.exists(e)&&t.isFunction(e.replace)?e.replace(/^[\s\n]*/,""):e}function n(e){return t.exists(e)&&t.isFunction(e.replace)?e.replace(/[\s\n]*$/,""):e}function a(t=""){return(t||"").charAt(0).toUpperCase()+(t||"").slice(1).toLowerCase()}class u{constructor(t="",e="",r=""){this._first=t||"",this._middle=e||"",this._last=r||""}get first(){return this._first}get middle(){return this._middle}get last(){return this._last}get full(){const e=t.isNullOrEmpty(this.middle)?"F L":"F M L";return s(this.toString(e).replace(/\s+/," "))}get initials(){const e=t.isNullOrEmpty(this.middle)?"f.l.":"f.m.l.";return s(this.toString(e).replace(/\s{2,}/,""))}equals(e){return t.exists(e)&&e.first===this.first&&e.middle===this.middle&&e.last===this.last}toString(e){const r=this.first.charAt(0),s=this.middle.charAt(0),i=this.last.charAt(0);return t.isNullOrEmpty(e)?this.full:e.replace(/([FfMmLl])/g,"{$1}").replace("{F}",this.first).replace("{M}",this.middle).replace("{L}",this.last).replace("{f}",r).replace("{m}",s).replace("{l}",i)}}let o;class c{constructor(t,e,r){if(e<1||e>12)throw new Error("Invalid month at Assert.DayPoint");if(r<1||r>h(e,t))throw new Error("Invalid date at DayPoint");this._value=arguments.length>=3?new Date(t,e-1,r):new Date,this._day=this._value.getDay(),this._date=r,this._month=e,this._year=t}get value(){return this._value}get day(){return this._day}get date(){return this._date}get month(){return this._month}get year(){return this._year}get shortYear(){const t=this._year.toString();return parseInt(t.substr(t.length-2))}get isWeekday(){const t=this._day;return t>0&&t<6}get isWeekend(){return!this.isWeekday}get isLeapYear(){return l(this._year)}get nextDay(){return d(this,1,0,0)}get prevDay(){return d(this,-1,0,0)}get nextMonth(){return d(this,0,1,0)}get prevMonth(){return d(this,0,-1,0)}get nextYear(){return d(this,0,0,1)}get prevYear(){return d(this,0,0,-1)}get firstDayOfMonth(){return new c(this._year,this._month,1)}get lastDayOfMonth(){return new c(this._year,this._month,h(this._month,this._year))}add(t,e,r){function s(t,e,r){let s=t,i=e;for(;i--;)s=s[r];return s}const{abs:i}=Math,n=i(t),a=i(r),u=i(e),o=r<0?"prevDay":"nextDay",c=e<0?"prevMonth":"nextMonth";return s(s(s(this,n,t<0?"prevYear":"nextYear"),u,c),a,o)}isBefore(t){return!(this.isAfter(t)||this.equals(t))}isAfter(t){const e=this._year,r=t.year,s=this._month,i=t.month;return e>r||(e===r&&s>i||e===r&&s===i&&this._date>t.date)}equals(t){return this._year===t.year&&this._month===t.month&&this._date===t.date}toString(t="mm/dd/yyyy"){const e=/y{3,}/i.test(t)?this._year:this.shortYear,s=this._month,i=this._date,n=/m{2}/i.test(t)&&s<10?"0{1}":"{1}",a=/d{2}/i.test(t)&&i<10?"0{2}":"{2}";return r(t.replace(/y+/gi,"{0}").replace(/m+/gi,n).replace(/d+/gi,a),e,s,i)}toDate(){return this._value}toJson(){return this._value.toJSON()}static canParse(e){return!!(t.isString(e)||t.isNumber(e)||t.isDate(e))&&!isNaN(new Date(e).valueOf())}static parse(e){if(e instanceof c)return e;let i=t.isString(e)?s(e).replace(/T\d{2}:\d{2}:\d{2}(.\d+)?Z/,""):e;if(/^\d{4}-\d{1,2}-\d{1,2}$/.test(i)){const t=i.split("-"),[e]=t;t.push(e),t.shift(),i=t.join("/")}const n=new Date(i);if(!t.exists(i)||isNaN(n.valueOf()))throw new Error(r("Cannot parse value= {0}",i));return new c(n.getFullYear(),n.getMonth()+1,n.getDate())}static tryParse(t){return c.canParse(t)?c.parse(t):null}static assumeNow(t){o=c.parse(t)}static get today(){return o||c.parse(new Date)}}function h(e,r){return 2===e?l(r)?29:28:e<8&&t.isEven(e)||e>7&&t.isOdd(e)?30:31}function l(t){const r=t.toString().split(/\B/);return parseFloat(e(r[r.length-2],r[r.length-1]))%4==0}function d(t,e,r,s){const i=t.month,n=t.year,a=t.date,u=r,o=s;let l=a+e,d=i+u,y=n+o;if(a+e>h(i,n)&&(l=1,d=i+u+1),a+e<1){const e=t.prevMonth;l=h(e.month,e.year),d=i+u-1}return d>12&&(d=1,y=n+o+1),d<1&&(d=12,y=n+o-1),new c(y,d,l)}function y(t,e=0){const r=Math.pow(10,-e);return Math.round(parseFloat((t*r).toFixed(Math.abs(e))))/r}function f(t,e=0){return y(t+5*Math.pow(10,e-1),e)}function p(t,e=0){if(0===t)return 0;return y(t-5*Math.pow(10,e-1),e)}function g(t,e=0){return t<0?f(t,e):p(t,e)}function m(t,e){return 0===e?Math.abs(t):m(e,t%e)}function w(t,e=0){const r=parseInt(t);return isNaN(r)?e:r}function x(t,e=0){const r=parseFloat(t);return isNaN(r)?e:r}class _{constructor(e=0,r){if(!t.isNumber(e))throw new Error("Money requires valid numeric amount.");const s=g(e);this._cents=/\./.test(e)?parseFloat(e.toString().replace(/\d+\./,".")):0,this._dollars=s,this._currency=r||"$",this._value=e}get cents(){return this._cents}get dollars(){return this._dollars}get currency(){return this._currency}get value(){return this._value}add(t){return v(this,t),new _(this.value+t.value,this.currency)}subtract(t){return v(this,t),new _(this.value-t.value,this.currency)}multiply(e){if(!t.isNumber(e))throw new Error(`Invalid factor ${e}`);return new _(this.value*e,this.currency)}divide(e){if(!t.isNumber(e))throw new Error(`Invalid divisor ${e}`);return new _(this.value/e,this.currency)}equals(t){return this.isOfCurrency(t)&&this.value===t.value}isGreaterThan(t){return v(this,t),this.value>t.value}isLessThan(t){return v(this,t),this.value<t.value}get nearestWhole(){return new _(y(this.value,0),this.currency)}get nearestDollar(){return this.nearestWhole}round(t=-2){return new _(y(this.value,t),this.currency)}roundDown(t=-2){return new _(p(this.value,t),this.currency)}roundUp(t=-2){return new _(f(this.value,t),this.currency)}exchange(t,e){return new _(this.multiply(t).value,e)}isOfCurrency(t){return this.currency===t.currency}toString(t="d.c2"){const[,e,r]=/d(.)c(\d+)/.exec(t),s={".":",",",":"."}[e],i=function(t,e){if(0===t)return"0";const r=t.toString().replace(/[^\d]/,"").split(/\B/);let s=0;return r.reverse().reduce((t,r)=>(s>0&&!(s%3)&&(t.push(e),s=0),t.push(r),s++,t),[]).reverse().join("").replace(/[^\d]$/,"")}(this.dollars,s),n=function(t,e){const r=t.toString().replace(/[^\d]|0\./g,""),s="0".repeat(e);return`${r}${s}`.slice(0,e)}(this.cents,w(r,2)),a=`${this.currency}${i}${e}${n}`;return this.value<0?`(${a})`:a}static zero(t){return new _(0,t)}static isMoney(t){return t instanceof _}static canParse(t){try{return _.parse(t),!0}catch(t){return!1}}static parse(e){if(t.isNumber(e))return new _(e);let r=e;if(/,\d{2}$/.test(e)){const t=e.split(","),s=t.pop();r=`${t.join().replace(/\./g,",")}.${s}`}const s=/(\(.*\))|(-)/.test(r),i=s?1:0,n=r.match(/[^\d.,-]/g),a=t.isArray(n)?n[i]:null,u=parseFloat(r.replace(/[^\d.]/g,""));return new _(s?-u:u,a)}static tryParse(t){return _.canParse(t)?_.parse(t):null}}function v(t,e){if(!t.isOfCurrency(e))throw new Error(`Invalid operation on non-conforming currencies. ${t.currency} !== ${e.currency}`)}class N{constructor(e=0,r=0){if(!t.isNumber(e)||!t.isNumber(r))throw new Error("Coord requires numeric x and y values");this._x=e,this._y=r}get x(){return this._x}get y(){return this._y}get value(){return{x:this.x,y:this.y}}get half(){return this.divide(new N(2,2))}get abs(){return new N(Math.abs(this.x),Math.abs(this.y))}add(t){return new N(this.x+t.x,this.y+t.y)}divide(t){return new N(this.x/t.x,this.y/t.y)}equals(t){return this.x===t.x&&this.y===t.y}multiply(t){return new N(this.x*t.x,this.y*t.y)}subtract(t){return new N(this.x-t.x,this.y-t.y)}round(t=0){return new N(y(this.x,t),y(this.y,t))}toString(){return`(${this.x},${this.y})`}static canParse(e){return t.isArray(e)?!(isNaN(e[0])||isNaN(e[1])):t.isObjectLiteral(e)&&"x"in e&&"y"in e?!(isNaN(e.x)||isNaN(e.y)):e instanceof N}static parse(e){return t.exists(e)?e instanceof N?e:t.isArray(e)?new N(e[0],e[1]):t.isObjectLiteral(e)&&t.exists(e.x)&&t.exists(e.y)?new N(e.x,e.y):null:null}static tryParse(t){return N.canParse(t)?N.parse(t):null}}class b extends N{constructor(t=0,e=0){super(t,e),this.lengthSquared=Math.pow(t,2)+Math.pow(e,2),this.magnitude=Math.sqrt(this.lengthSquared),this.unitNormalX=0===t&&0===e?0:t/this.magnitude,this.unitNormalY=0===t&&0===e?0:e/this.magnitude}get isZero(){return 0===this.x&&0===this.y}get normal(){return new b(this.unitNormalX,this.unitNormalY)}get invert(){return new b(-this.x,-this.y)}get norm(){return new b(Math.abs(this.x),Math.abs(this.y))}get perpendicular(){return new b(-this.y,this.x)}equals(t){return t instanceof b&&this.x===t.x&&this.y===t.y}add(t){return t instanceof b?new b(this.x+t.x,this.y+t.y):null}dot(t){return t instanceof b?this.x*t.x+this.y*t.y:null}perpendicularAtTo(t){if(!(t instanceof b))return null;const e=t.add(this.projectionOfOnto(t).invert);return new b(e.x,e.y)}projectionOfOnto(t){if(!(t instanceof b))return null;const e=t.normal.scale(this.dot(t.normal));return new b(e.x,e.y)}scale(t){return new b(this.x*t,this.y*t)}unitNormalDot(t){return t instanceof b?this.normal.x*t.normal.x+this.normal.y*t.normal.y:null}reflect(t){if(!(t instanceof b))return null;if(t.isZero)return this;const e=t.normal;return this.add(e.scale(2*e.dot(this)).invert)}round(t=0){return new b(y(this.x,t),y(this.y,t))}}class A extends N{constructor(t,e){super(t,e)}isAbove(t){return this.y<t.y}isBelow(t){return this.y>t.y}isLeftOf(t){return this.x<t.x}isRightOf(t){return this.x>t.x}distanceFrom(t){return new b(this.x-t.x,this.y-t.y)}distanceTo(t){return this.distanceFrom(t).invert}static canParse(t){return t instanceof A||N.canParse(t)}static parse(t){if(t instanceof A)return t;const e=N.parse(t);return new A(e.x,e.y)}static tryParse(t){return A.canParse(t)?A.parse(t):null}}class S{constructor(t=0,e=0,r=0,s=0){this.origin=new A(t,e),this.dimensions=new N(r,s),this.diagonal=A.parse(this.origin.add(this.dimensions)),this.center=this.diagonal.half}contains(t){return this.origin.isAbove(t)&&this.origin.isLeftOf(t)&&this.diagonal.isRightOf(t)&&this.diagonal.isBelow(t)}aspectToFit(t){const e=this.dimensions,r=t.dimensions,s=r.x,i=r.y;let n=e.x,a=e.y;return n>a&&0!==n?(a*=s/n,n=s,a>i&&(a=i,n*=a/e.y)):a>i&&(n*=i/a,a=i),new S(this.origin.x,this.origin.y,n,a)}}function $(){return Math.random().toString().substr(2)}function O(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}class M{constructor(){if(this.constructor===M)throw new Error("Cannot instantiate abstract class: AbstractSpecification")}and(t){return new B(this,t)}or(t){return new F(this,t)}xor(t){return new D(this,t)}not(t){return new E(this,t)}isSatisfiedBy(){throw new Error("Abstract method must be implemented.")}}class B extends M{constructor(t,e){super(),this._specificationA=t,this._specificationB=e}isSatisfiedBy(t){return this._specificationA.isSatisfiedBy(t)&&this._specificationB.isSatisfiedBy(t)}}class F extends M{constructor(t,e){super(),this._specificationA=t,this._specificationB=e}isSatisfiedBy(t){return this._specificationA.isSatisfiedBy(t)||this._specificationB.isSatisfiedBy(t)}}class D extends M{constructor(t,e){super(),this._specificationA=t,this._specificationB=e}isSatisfiedBy(t){return!this._specificationA.isSatisfiedBy(t)!=!this._specificationB.isSatisfiedBy(t)}}class E extends M{constructor(t){super(),this._specification=t}isSatisfiedBy(t){return!this._specification.isSatisfiedBy(t)}}class P{constructor(){if(this.constructor===P)throw new Error("Cannot instantiate abstract class.")}execute(){throw new Error("Abstract method must be implemented.")}}var j=(t,e,r=!1)=>{let s;return(...i)=>{const n=r&&!s;clearTimeout(s),s=setTimeout(()=>{s=null,r||t(...i)},e),n&&t(...i)}};var z=Object.freeze({__proto__:null,alpha:/^[A-z]+$/,alphaNumeric:/^[A-z0-9]+$/,base64:/^[A-z0-9=]+$/,dataUrl:/^\s*data:([a-z]+\/[a-z0-9+-]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=._~:@/?%\s-]*\s*$/i,email:/^\w+([.\w-]+)?@\w+([.\w-]+)?\.[A-Za-z0-9]{2,}$/,empty:/^$/,numeric:/^-?[0-9]+$/,script:/(<script[A-z0-9\n\s\t\r.={([\])}'",;!&|$/#:<>*?+\u0000-\u0037\u00C2\u00A0\u2122-]*?<\/script>)/,uid:/^\d{14,}$/i,url:/^(https?:\/\/)?[^{}\\:]+\.[A-z0-9]{2,12}(\/[^?\s]+)*\/?(\?([^=?#]+=[^=?#]*(&[^=?#]+=[^=?#]*)*(#.*)?)?)?$/,uuid:/^[{(]?[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}[)}]?$/i}),L=t=>setTimeout(t,0),T=t=>new Promise(e=>setTimeout(e,t));export{M as AbstractSpecification,P as AbstractStrategy,t as Assert,N as Coord,c as DayPoint,_ as Money,u as Name,A as Point,S as Rectangle,b as Vector,e as build,a as capitalize,j as debounce,r as format,m as gcd,L as nextTick,z as regex,y as round,p as roundDown,g as roundTowardZero,f as roundUp,s as trim,n as trimEnd,i as trimStart,x as tryParseFloat,w as tryParseInt,$ as uid,O as uuid,T as wait};
