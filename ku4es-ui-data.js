!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ku4es_ui_kernel={})}(this,(function(exports){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function createCommonjsModule(t){var e={exports:{}};return t(e,e.exports),e.exports}var dist_1=createCommonjsModule((function(module,exports){function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function createCommonjsModule(t){var e={exports:{}};return t(e,e.exports),e.exports}Object.defineProperty(exports,"__esModule",{value:!0});var dist=createCommonjsModule((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0});var y=function(){function t(){i(this,t)}return a(t,null,[{key:"isNull",value:function(t){return null===t}},{key:"isEmpty",value:function(e){return t.isString(e)&&""===e||t.isArray(e)&&e.length<1||t.isObjectLiteral(e)&&Object.keys(e).length<1}},{key:"isUndefined",value:function(t){return void 0===t}},{key:"isZero",value:function(t){return 0===t}},{key:"exists",value:function(e){return!(t.isUndefined(e)||t.isNull(e))}},{key:"isNullOrEmpty",value:function(e){return!t.exists(e)||t.isEmpty(e)}},{key:"isArray",value:function(t){return Array.isArray(t)}},{key:"isBool",value:function(t){return"boolean"==typeof t}},{key:"isTrue",value:function(e){return t.isBool(e)&&!0===e}},{key:"isFalse",value:function(e){return t.isBool(e)&&!1===e}},{key:"isDate",value:function(t){return t instanceof Date}},{key:"isNumber",value:function(t){return("number"==typeof t||t instanceof Number)&&!isNaN(t)}},{key:"isEven",value:function(t){return this.isNumber(t)&&!this.isZero(t)&&t%2==0}},{key:"isOdd",value:function(t){return this.isNumber(t)&&!this.isZero(t)&&!this.isEven(t)}},{key:"isString",value:function(t){return"string"==typeof t||t instanceof String}},{key:"isFunction",value:function(t){return t instanceof Function}},{key:"isAsyncFunction",value:function(e){try{return"AsyncFunction"===Object.getPrototypeOf(e).constructor.name||t.isFunction(e)&&/^async/.test(e.toString())||t.isFunction(e().then)}catch(e){return!1}}},{key:"isPromise",value:function(t){return t instanceof Promise}},{key:"isObject",value:function(e){return t.exists(e)&&"object"===n(e)&&!(t.isBool(e)||t.isNumber(e)||t.isDate(e)||t.isArray(e)||t.isString(e)||t.isFunction(e))}},{key:"isObjectLiteral",value:function(e){return t.isObject(e)&&e.constructor==={}.constructor}},{key:"isTruthy",value:function(e){return!t.isFalsy(e)}},{key:"isFalsy",value:function(e){return t.isZero(e)||t.isFalse(e)||t.isNullOrEmpty(e)||isNaN(e)}}]),t}();function v(){var t;return(t="").concat.apply(t,arguments)}function p(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e,n){return t.replace(new RegExp("\\{".concat(n,"\\}"),"g"),e&&e.toString?e.toString():e)}),t)}function g(t){return m(w(t))}function m(t){return y.exists(t)&&y.isFunction(t.replace)?t.replace(/^[\s\n]*/,""):t}function w(t){return y.exists(t)&&y.isFunction(t.replace)?t.replace(/[\s\n]*$/,""):t}var b,k,_,S=Object.freeze({__proto__:null,build:v,chunk:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!y.isString(t)||Number.isNaN(e)||e<0)return[];if(e<t.length){for(var n=0,r=e||t.length,i=[];n<t.length;)i.push(t.slice(n,n+r)),n+=r;return i}return[t]},format:p,trim:g,trimStart:m,trimEnd:w,capitalize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t||"").charAt(0).toUpperCase()+(t||"").slice(1).toLowerCase()},mask:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_";return y.isFunction(e)?e(t):y.isString(e)&&t.split("").reduce((function(t,e){return t.replace(new RegExp(n),e)}),e)},unmask:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_",r=new RegExp(n);return y.isFunction(e)?e(t):y.isString(e)&&t.split("").reduce((function(t,n,i){return!r.test(n)&&r.test(e.charAt(i))?t+n:t}),"")}}),A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";i(this,t),this._first=e||"",this._middle=n||"",this._last=r||""}return a(t,[{key:"equals",value:function(t){return y.exists(t)&&t.first===this.first&&t.middle===this.middle&&t.last===this.last}},{key:"toString",value:function(t){var e=this.first.charAt(0),n=this.middle.charAt(0),r=this.last.charAt(0);return y.isNullOrEmpty(t)?this.full:t.replace(/([FfMmLl])/g,"{$1}").replace("{F}",this.first).replace("{M}",this.middle).replace("{L}",this.last).replace("{f}",e).replace("{m}",n).replace("{l}",r)}},{key:"first",get:function(){return this._first}},{key:"middle",get:function(){return this._middle}},{key:"last",get:function(){return this._last}},{key:"full",get:function(){var t=y.isNullOrEmpty(this.middle)?"F L":"F M L";return g(this.toString(t).replace(/\s+/," "))}},{key:"initials",get:function(){var t=y.isNullOrEmpty(this.middle)?"f.l.":"f.m.l.";return g(this.toString(t).replace(/\s{2,}/,""))}}]),t}(),x=function(){function t(e){i(this,t),this._list=e,this._head=0}return a(t,[{key:"isEmpty",get:function(){return this.length<1}},{key:"index",get:function(){return this._head}},{key:"length",get:function(){return this._list.length}},{key:"current",get:function(){return this._list[this._head]}},{key:"next",get:function(){var t=this.length,e=this._head;return this._head=e++<t-1?e:0,this.current}},{key:"prev",get:function(){var t=this.length,e=this._head;return this._head=--e<0?t-1:e,this.current}},{key:"peekNext",get:function(){var t=this._head,e=this.length;return this._list[t+1<e?t+1:0]}},{key:"peekPrev",get:function(){var t=this._head,e=this.length;return this._list[t-1<0?e-1:t-1]}}]),t}();function P(t,e){try{return t()}catch(t){return e}}P.async=(b=regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})),k=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=b.apply(t,e);function a(t){r(o,n,i,a,u,"next",t)}function u(t){r(o,n,i,a,u,"throw",t)}a(void 0)}))},function(t,e){return k.apply(this,arguments)});var O=function(){function t(e,n,r){if(i(this,t),n<1||n>12)throw new Error("Invalid month at Assert.DayPoint");if(r<1||r>F(n,e))throw new Error("Invalid date at DayPoint");this._value=arguments.length>=3?new Date(e,n-1,r):new Date,this._day=this._value.getDay(),this._date=r,this._month=n,this._year=e}return a(t,[{key:"add",value:function(t,e,n){function r(t,e,n){for(var r=t,i=e;i--;)r=r[n];return r}var i=Math.abs,o=i(t),a=i(n),u=i(e),s=n<0?"prevDay":"nextDay",c=e<0?"prevMonth":"nextMonth";return r(r(r(this,o,t<0?"prevYear":"nextYear"),u,c),a,s)}},{key:"isBefore",value:function(t){return!(this.isAfter(t)||this.equals(t))}},{key:"isAfter",value:function(t){var e=this._year,n=t.year,r=this._month,i=t.month;return e>n||e===n&&r>i||e===n&&r===i&&this._date>t.date}},{key:"equals",value:function(t){return this._year===t.year&&this._month===t.month&&this._date===t.date}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mm/dd/yyyy",e=/y{3,}/i.test(t)?this._year:this.shortYear,n=this._month,r=this._date,i="{0}",o=/m{2}/i.test(t)&&n<10?"0{1}":"{1}",a=/d{2}/i.test(t)&&r<10?"0{2}":"{2}",u=t.replace(/y+/gi,i).replace(/m+/gi,o).replace(/d+/gi,a);return p(u,e,n,r)}},{key:"toDate",value:function(){return this._value}},{key:"toJson",value:function(){return this._value.toJSON()}},{key:"value",get:function(){return this._value}},{key:"day",get:function(){return this._day}},{key:"date",get:function(){return this._date}},{key:"month",get:function(){return this._month}},{key:"year",get:function(){return this._year}},{key:"shortYear",get:function(){var t=this._year.toString();return parseInt(t.substr(t.length-2))}},{key:"isWeekday",get:function(){var t=this._day;return t>0&&t<6}},{key:"isWeekend",get:function(){return!this.isWeekday}},{key:"isLeapYear",get:function(){return C(this._year)}},{key:"nextDay",get:function(){return D(this,1,0,0)}},{key:"prevDay",get:function(){return D(this,-1,0,0)}},{key:"nextMonth",get:function(){return D(this,0,1,0)}},{key:"prevMonth",get:function(){return D(this,0,-1,0)}},{key:"nextYear",get:function(){return D(this,0,0,1)}},{key:"prevYear",get:function(){return D(this,0,0,-1)}},{key:"firstDayOfMonth",get:function(){return new t(this._year,this._month,1)}},{key:"lastDayOfMonth",get:function(){return new t(this._year,this._month,F(this._month,this._year))}}],[{key:"canParse",value:function(e){return y.isString(e)||y.isNumber(e)||y.isDate(e)?!isNaN(new Date(e).valueOf()):e instanceof t}},{key:"parse",value:function(e){if(e instanceof t)return e;var n=y.isString(e)?g(e).replace(/T\d{2}:\d{2}:\d{2}(.\d+)?Z/,""):e;if(/^\d{4}-\d{1,2}-\d{1,2}$/.test(n)){var r=n.split("-"),i=h(r,1)[0];r.push(i),r.shift(),n=r.join("/")}var o=new Date(n);if(!y.exists(n)||Number.isNaN(o.valueOf()))throw new Error(p("Cannot parse value= {0}",n));return new t(o.getFullYear(),o.getMonth()+1,o.getDate())}},{key:"tryParse",value:function(e){return P((function(){return t.parse(e)}),null)}},{key:"assumeNow",value:function(e){_=t.parse(e)}},{key:"today",get:function(){return _||t.parse(new Date)}}]),t}();function F(t,e){return 2===t?C(e)?29:28:t<8&&y.isEven(t)||t>7&&y.isOdd(t)?30:31}function C(t){var e=t.toString().split(/\B/);return parseFloat(v(e[e.length-2],e[e.length-1]))%4==0}function D(t,e,n,r){var i=t.month,o=t.year,a=t.date,u=n,s=r,c=a+e,l=i+u,f=o+s;if(a+e>F(i,o)&&(c=1,l=i+u+1),a+e<1){var h=t.prevMonth;c=F(h.month,h.year),l=i+u-1}return l>12&&(l=1,f=o+s+1),l<1&&(l=12,f=o+s-1),new O(f,l,c)}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,-e);return Math.round(parseFloat((t*n).toFixed(Math.abs(e))))/n}function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=5*Math.pow(10,e-1);return E(t+n,e)}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===t)return 0;var n=5*Math.pow(10,e-1);return E(t-n,e)}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t<0?N(t,e):I(t,e)}function T(t){return function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return 0<e?t(--e,r,n+r):n}(t)}function M(t){for(var e=0,n=1,r=0;t>1;)r=e,e=n,n+=r,t--;return t<1?e:n}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(t);return Number.isNaN(n)?e:n}var R=Object.freeze({__proto__:null,random:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.random()*(e-t)+t},round:E,roundUp:N,roundDown:I,roundTowardZero:B,gcd:function t(e,n){return 0===n?Math.abs(e):t(n,e%n)},fib:T,fib2:M,fibArray:function(t){return Array(t).fill(0).map((function(){return T(--t)})).reverse()},fib2Array:function(t){return Array(t).fill(0).map((function(){return M(--t)})).reverse()},tryParseInt:j,tryParseFloat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseFloat(t);return Number.isNaN(n)?e:n}}),L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;if(i(this,t),!y.isNumber(e))throw new Error("Money requires valid numeric amount.");var r=B(e);this._cents=/\./.test(e)?parseFloat(e.toString().replace(/\d+\./,".")):0,this._dollars=r,this._currency=n||"$",this._value=e}return a(t,[{key:"add",value:function(e){return $(this,e),new t(this.value+e.value,this.currency)}},{key:"subtract",value:function(e){return $(this,e),new t(this.value-e.value,this.currency)}},{key:"multiply",value:function(e){if(!y.isNumber(e))throw new Error("Invalid factor ".concat(e));return new t(this.value*e,this.currency)}},{key:"divide",value:function(e){if(!y.isNumber(e))throw new Error("Invalid divisor ".concat(e));return new t(this.value/e,this.currency)}},{key:"equals",value:function(t){return this.isOfCurrency(t)&&this.value===t.value}},{key:"isGreaterThan",value:function(t){return $(this,t),this.value>t.value}},{key:"isLessThan",value:function(t){return $(this,t),this.value<t.value}},{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-2;return new t(E(this.value,e),this.currency)}},{key:"roundDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-2;return new t(I(this.value,e),this.currency)}},{key:"roundUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-2;return new t(N(this.value,e),this.currency)}},{key:"exchange",value:function(e,n){return new t(this.multiply(e).value,n)}},{key:"isOfCurrency",value:function(t){return this.currency===t.currency}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d.c2",e=arguments.length>1?arguments[1]:void 0,n=/d(.)c(\d+)/.exec(t),r=h(n,3),i=r[1],o=r[2],a=e||{".":",",",":"."}[i],u=z(this.dollars,a||","),s=U(this.cents,j(o,2)),c="".concat(this.currency).concat(u).concat(i).concat(s);return this.value<0?"(".concat(c,")"):c}},{key:"cents",get:function(){return this._cents}},{key:"dollars",get:function(){return this._dollars}},{key:"currency",get:function(){return this._currency}},{key:"value",get:function(){return this._value}},{key:"nearestWhole",get:function(){return new t(E(this.value,0),this.currency)}},{key:"nearestDollar",get:function(){return this.nearestWhole}}],[{key:"zero",value:function(e){return new t(0,e)}},{key:"isMoney",value:function(e){return e instanceof t}},{key:"canParse",value:function(e){try{return t.parse(e),!0}catch(t){return!1}}},{key:"parse",value:function(e){if(y.isNumber(e))return new t(e);var n=e;if(/,\d{2}$/.test(e)){var r=e.split(","),i=r.pop(),o=r.join().replace(/\./g,",");n="".concat(o,".").concat(i)}var a=/(\(.*\))|(-)/.test(n),u=a?1:0,s=n.match(/[^\d.,-]/g),c=y.isArray(s)?s[u]:null,l=parseFloat(n.replace(/[^\d.]/g,""));return new t(a?-l:l,c)}},{key:"tryParse",value:function(e){return P((function(){return t.parse(e)}),null)}}]),t}();function $(t,e){if(!t.isOfCurrency(e))throw new Error("Invalid operation on non-conforming currencies. ".concat(t.currency," !== ").concat(e.currency))}function z(t,e){if(0===t)return"0";var n=t.toString().replace(/[^\d]/,"").split(/\B/),r=0;return n.reverse().reduce((function(t,n){return r>0&&!(r%3)&&(t.push(e),r=0),t.push(n),r++,t}),[]).reverse().join("").replace(/[^\d]$/,"")}function U(t,e){var n=t.toString().replace(/[^\d]|0\./g,""),r="0".repeat(e);return"".concat(n).concat(r).slice(0,e)}var K=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(i(this,t),!y.isNumber(e)||!y.isNumber(n))throw new Error("Coord requires numeric x and y values");this._x=e,this._y=n}return a(t,[{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"multiply",value:function(e){return new t(this.x*e.x,this.y*e.y)}},{key:"divide",value:function(e){return new t(this.x/e.x,this.y/e.y)}},{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new t(E(this.x,e),E(this.y,e))}},{key:"toString",value:function(){return"(".concat(this.x,",").concat(this.y,")")}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"value",get:function(){return{x:this.x,y:this.y}}},{key:"half",get:function(){return this.divide(new t(2,2))}},{key:"abs",get:function(){return new t(Math.abs(this.x),Math.abs(this.y))}}],[{key:"canParse",value:function(e){return y.isArray(e)?!(Number.isNaN(e[0])||Number.isNaN(e[1])):y.isObjectLiteral(e)&&"x"in e&&"y"in e?!(Number.isNaN(e.x)||Number.isNaN(e.y)):e instanceof t}},{key:"parse",value:function(e){return y.exists(e)?e instanceof t?e:y.isArray(e)?new t(e[0],e[1]):y.isObjectLiteral(e)&&y.exists(e.x)&&y.exists(e.y)?new t(e.x,e.y):null:null}},{key:"tryParse",value:function(e){return P((function(){return t.parse(e)}),null)}}]),t}(),Y=function(t){u(n,K);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i(this,n),(t=e.call(this,r,o))._lengthSquared=Math.pow(r,2)+Math.pow(o,2),t._magnitude=Math.sqrt(t._lengthSquared),t._unitNormalX=0===r&&0===o?0:r/t._magnitude,t._unitNormalY=0===r&&0===o?0:o/t._magnitude,t}return a(n,[{key:"equals",value:function(t){return t instanceof n&&this.x===t.x&&this.y===t.y}},{key:"add",value:function(t){return t instanceof n?new n(this.x+t.x,this.y+t.y):null}},{key:"dot",value:function(t){return t instanceof n?this.x*t.x+this.y*t.y:null}},{key:"perpendicularAtTo",value:function(t){if(!(t instanceof n))return null;var e=t.add(this.projectionOfOnto(t).invert);return new n(e.x,e.y)}},{key:"projectionOfOnto",value:function(t){if(!(t instanceof n))return null;var e=t.normal.scale(this.dot(t.normal));return new n(e.x,e.y)}},{key:"scale",value:function(t){return new n(this.x*t,this.y*t)}},{key:"unitNormalDot",value:function(t){return t instanceof n?this.normal.x*t.normal.x+this.normal.y*t.normal.y:null}},{key:"reflect",value:function(t){if(!(t instanceof n))return null;if(t.isZero)return this;var e=t.normal;return this.add(e.scale(2*e.dot(this)).invert)}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new n(E(this.x,t),E(this.y,t))}},{key:"magnitude",get:function(){return this._magnitude}},{key:"isZero",get:function(){return 0===this.x&&0===this.y}},{key:"normal",get:function(){return new n(this._unitNormalX,this._unitNormalY)}},{key:"invert",get:function(){return new n(-this.x,-this.y)}},{key:"norm",get:function(){return new n(Math.abs(this.x),Math.abs(this.y))}},{key:"perpendicular",get:function(){return new n(-this.y,this.x)}}]),n}(),G=function(t){u(n,K);var e=f(n);function n(t,r){return i(this,n),e.call(this,t,r)}return a(n,[{key:"isAbove",value:function(t){return this.y<t.y}},{key:"isBelow",value:function(t){return this.y>t.y}},{key:"isLeftOf",value:function(t){return this.x<t.x}},{key:"isRightOf",value:function(t){return this.x>t.x}},{key:"distanceFrom",value:function(t){return new Y(this.x-t.x,this.y-t.y)}},{key:"distanceTo",value:function(t){return this.distanceFrom(t).invert}}],[{key:"canParse",value:function(t){return t instanceof n||K.canParse(t)}},{key:"parse",value:function(t){if(t instanceof n)return t;var e=K.parse(t);return new n(e.x,e.y)}},{key:"tryParse",value:function(t){return P((function(){return n.parse(t)}),null)}}]),n}(),W=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.origin=new G(e,n),this.dimensions=new K(r,o),this.diagonal=G.parse(this.origin.add(this.dimensions)),this.center=this.diagonal.half}return a(t,[{key:"contains",value:function(t){return this.origin.isAbove(t)&&this.origin.isLeftOf(t)&&this.diagonal.isRightOf(t)&&this.diagonal.isBelow(t)}},{key:"aspectToFit",value:function(e){var n=this.dimensions,r=e.dimensions,i=r.x,o=r.y,a=n.x,u=n.y;return a>u&&0!==a?(u*=i/a,a=i,u>o&&(a*=(u=o)/n.y)):u>o&&(a*=o/u,u=o),new t(this.origin.x,this.origin.y,a,u)}}]),t}();function X(){return Math.random().toString().substr(2)}function q(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}var J=Object.freeze({__proto__:null,uid:X,uuid:q,suid:function(){return Symbol(X())},suuid:function(){return Symbol(q())}}),Z=function(){function t(){if(i(this,t),this.constructor===t)throw new Error("Cannot instantiate abstract class: AbstractSpecification")}return a(t,[{key:"and",value:function(t){return new H(this,t)}},{key:"or",value:function(t){return new V(this,t)}},{key:"xor",value:function(t){return new Q(this,t)}},{key:"not",value:function(t){return new tt(this,t)}},{key:"isSatisfiedBy",value:function(){throw new Error("Abstract method must be implemented.")}}]),t}(),H=function(t){u(n,Z);var e=f(n);function n(t,r){var o;return i(this,n),(o=e.call(this))._specificationA=t,o._specificationB=r,o}return a(n,[{key:"isSatisfiedBy",value:function(t){return this._specificationA.isSatisfiedBy(t)&&this._specificationB.isSatisfiedBy(t)}}]),n}(),V=function(t){u(n,Z);var e=f(n);function n(t,r){var o;return i(this,n),(o=e.call(this))._specificationA=t,o._specificationB=r,o}return a(n,[{key:"isSatisfiedBy",value:function(t){return this._specificationA.isSatisfiedBy(t)||this._specificationB.isSatisfiedBy(t)}}]),n}(),Q=function(t){u(n,Z);var e=f(n);function n(t,r){var o;return i(this,n),(o=e.call(this))._specificationA=t,o._specificationB=r,o}return a(n,[{key:"isSatisfiedBy",value:function(t){return!this._specificationA.isSatisfiedBy(t)!=!this._specificationB.isSatisfiedBy(t)}}]),n}(),tt=function(t){u(n,Z);var e=f(n);function n(t){var r;return i(this,n),(r=e.call(this))._specification=t,r}return a(n,[{key:"isSatisfiedBy",value:function(t){return!this._specification.isSatisfiedBy(t)}}]),n}(),et=(function(t){u(n,Z);var e=f(n);function n(){return i(this,n),e.apply(this,arguments)}a(n,[{key:"isSatisfiedBy",value:function(){return!0}}])}(),function(t){u(n,Z);var e=f(n);function n(){return i(this,n),e.apply(this,arguments)}a(n,[{key:"isSatisfiedBy",value:function(){return!1}}])}(),function(){function t(){if(i(this,t),this.constructor===t)throw new Error("Cannot instantiate abstract class.")}return a(t,[{key:"execute",value:function(){throw new Error("Abstract method must be implemented.")}}]),t}()),nt=Object.freeze({__proto__:null,pattern:function(t){return t.toString().replace(/(^\/)|(\/$)/g,"").replace(/\\/g,"\\")},escape:function(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},alpha:/^[A-z]+$/,alphaNumeric:/^[A-z0-9]+$/,base64:/^[A-z0-9=]+$/,dataUrl:/^\s*data:([a-z]+\/[a-z0-9+-]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=._~:@/?%\s-]*\s*$/i,email:/^\w+([.\w-]+)?@\w+([.\w-]+)?\.[A-Za-z0-9]{2,}$/,empty:/^$/,numeric:/^-?[0-9]+$/,script:/(<script[A-z0-9\n\s\t\r.={([\])}'",;!&|$/#:<>*?+\u0000-\u0037\u00C2\u00A0\u2122-]*?<\/script>)/,uid:/^\d{14,}$/i,url:/^(https?:\/\/)?[^{}\\:]+\.[A-z0-9]{2,12}(\/[^?\s]+)*\/?(\?([^=?#]+=[^=?#]*(&[^=?#]+=[^=?#]*)*(#.*)?)?)?$/,uuid:/^[{(]?[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}[)}]?$/i}),rt=function(){function t(e){i(this,t),this._milliseconds=e}return a(t,[{key:"onInterval",value:function(t){return this.clear(),this._didInterval=t,this}},{key:"start",value:function(){var t=this;return this.clear(),this._intervalId=setInterval((function(){t._didInterval()}),this._milliseconds),this}},{key:"clear",value:function(){return clearInterval(this._intervalId),this._intervalId=null,this}},{key:"isRunning",get:function(){return y.exists(this._intervalId)}}]),t}(),it=function(){function t(e){i(this,t),this._milliseconds=e}return a(t,[{key:"onTimeout",value:function(t){return this.clear(),this._didTimeout=t,this}},{key:"start",value:function(){var t=this;return this.clear(),this._timeoutId=setTimeout((function(){t._didTimeout()}),this._milliseconds),this}},{key:"clear",value:function(){return clearTimeout(this._timeoutId),this._timeoutId=null,this}},{key:"isRunning",get:function(){return y.exists(this._timeoutId)}}]),t}();e.AbstractSpecification=Z,e.AbstractStrategy=et,e.Assert=y,e.Coord=K,e.DayPoint=O,e.Interval=rt,e.Money=L,e.Name=A,e.Point=G,e.Rectangle=W,e.Rolodex=x,e.Timeout=it,e.Vector=Y,e.debounce=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var u=r&&!n,s=function(){n=null,r||t.apply(void 0,o)};clearTimeout(n),n=setTimeout(s,e),u&&t.apply(void 0,o)}},e.deduplicate=function(t){return t.reduce((function(t,e){return t.includes(e)||t.push(e),t}),[])},e.feature=function(t,e){return y.isPromise(t)||y.isAsyncFunction(t)?y.isFunction(t.then)?t.then((function(t){return t&&e()})):t().then((function(t){return t&&e()})):y.isFunction(t)&&t?t()&&e():y.isTrue(t)&&e()},e.identity=J,e.math=R,e.nextTick=function(t){return setTimeout(t,0)},e.opt=P,e.regex=nt,e.string=S,e.wait=function(t){return new Promise((function(e){return setTimeout(e,t)}))}})),Cookie=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"serialize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:defaultParams;try{if(dist.Assert.isUndefined(t))throw new Error;var n=Object.assign(defaultParams,e),r=n.name,i=n.expires,o=n.path,a=n.domain,u=n.secure,s=kvPair(r,t),c=dist.DayPoint.canParse(i)?kvPair("; expires",dist.DayPoint.parse(i).toDate().toGMTString()):"",l=o?kvPair("; path",o.split("/").map((function(t){return encodeURIComponent(t)})).join("/")):"",f=a?kvPair("; domain",encodeURIComponent(a)):"",h=u?"; secure":"";return s+c+l+f+h}catch(e){throw new Error(dist.string.format("Cannot serialize {0}",t))}}},{key:"deserialize",value:function(t){try{return _read(t)[1]}catch(e){throw new Error(dist.string.format("Cannot deserialize {0}",t))}}},{key:"read",value:function(t){try{var e=_slicedToArray(_read(t),2);return{name:e[0],value:e[1]}}catch(e){throw new Error(dist.string.format("Cannot read {0}",t))}}}]),t}(),defaultParams={name:dist.identity.uid(),expires:dist.DayPoint.today.nextYear.toDate(),path:"/",domain:null,secure:!1},kvPair=function(t,e){return"".concat(t,"=").concat(e)},_read=function(t){return/;/.test(t)?t.substring(0,t.search(";")).split("="):t.split("=")},Device=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"orientation",get:function(){var e=window.screen,n=(e.orientation||{}).type||e.mozOrientation||e.msOrientation,r=window.orientation;return n===t.landscapePrimary||90===r?t.landscapePrimary:n===t.landscapeSecondary||-90===r?t.landscapeSecondary:n===t.portraitPrimary||0===r?t.portraitPrimary:n===t.portraitSecondary||180===r?t.portraitSecondary:void 0}},{key:"landscapePrimary",get:function(){return"landscape-primary"}},{key:"landscapeSecondary",get:function(){return"landscape-secondary"}},{key:"portraitPrimary",get:function(){return"portrait-primary"}},{key:"portraitSecondary",get:function(){return"portrait-secondary"}},{key:"isMobile",get:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(window.navigator.userAgent)}}]),t}(),_onPreventScroll=new Set,_onResumeScroll=new Set,scroll,lastPageYOffset,lastPageXOffset,scrollIsDown=!1,scrollIsUp=!1,scrollIsLeft=!1,scrollIsRight=!1,Document=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"preventScroll",value:function(){try{_onPreventScroll.forEach((function(t){return t()}))}catch(t){}t.position=document.body.style.position,t.offsetY=document.body.style.offsetY,t.offsetX=document.body.style.offsetX,t.width=document.body.style.width,t.height=document.body.style.height,t.documentWidth=document.documentElement.style.width,t.documentHeight=document.documentElement.style.height,t.overflowY=document.documentElement.style.overflowY,t.scrollX=window.scrollX||window.pageXOffset,t.scrollY=window.scrollY||window.pageYOffset;var e=t.scrollbarWidth;document.body.style.position="fixed",document.body.style.offsetX="-".concat(t.scrollX,"px"),document.body.style.offsetY="calc(-".concat(t.scrollY,"px - ").concat(window.getComputedStyle(document.body)["padding-offsetY"]," - ").concat(window.getComputedStyle(document.body)["margin-offsetY"],")"),document.body.style.width="calc(100vw - ".concat(e,"px - ").concat(window.getComputedStyle(document.body)["padding-offsetX"]," - ").concat(window.getComputedStyle(document.body)["padding-right"]," - ").concat(window.getComputedStyle(document.body)["margin-offsetX"]," - ").concat(window.getComputedStyle(document.body)["margin-right"],")"),document.body.style.height="calc(100% + 1px)",document.documentElement.style.width="100wh",document.documentElement.style.height="100vh",document.documentElement.style.overflowY=e&&"scroll"}},{key:"resumeScroll",value:function(){try{_onResumeScroll.forEach((function(t){return t()}))}catch(t){}document.body.style.position=t.position,document.body.style.offsetY=t.offsetY,document.body.style.offsetX=t.offsetX,document.body.style.width=t.width,document.body.style.height=t.height,document.documentElement.style.width=t.documentWidth,document.documentElement.style.height=t.documentHeight,document.documentElement.style.overflowY=t.overflowY,window.scrollTo(t.scrollX,t.scrollY),t.position=null,t.offsetY=null,t.offsetX=null,t.width=null,t.height=null,t.documentWidth=null,t.documentHeight=null,t.overflowY=null,t.scrollX=null,t.scrollY=null}},{key:"onPreventScroll",value:function(t){_onPreventScroll.add(t)}},{key:"onResumeScroll",value:function(t){_onResumeScroll.add(t)}},{key:"scrollbarWidth",get:function(){return window.innerWidth-document.documentElement.clientWidth}},{key:"isScrollPrevented",get:function(){return dist.Assert.exists(t.scrollY)}},{key:"scroll",get:function(){return scroll||(scroll=new Scroll,lastPageYOffset=window.pageYOffset,lastPageXOffset=window.pageXOffset,scrollIsDown=!1,scrollIsUp=!1,scrollIsLeft=!1,scrollIsRight=!1,window.addEventListener("unload",(function(){return scroll.unload()}))),scroll}}]),t}(),updateScrollValue=function(){var t=window.pageYOffset,e=window.pageXOffset;scrollIsDown=t>lastPageYOffset,scrollIsUp=t<lastPageYOffset,scrollIsRight=e>lastPageXOffset,scrollIsLeft=e<lastPageXOffset,lastPageYOffset=t||window.pageYOffset,lastPageXOffset=e||window.pageXOffset},Scroll=function(){function t(){_classCallCheck(this,t),document.addEventListener("scroll",updateScrollValue,{passive:!0})}return _createClass(t,[{key:"unload",value:function(){document.removeEventListener("scroll",updateScrollValue),scrollIsDown=!1,scrollIsUp=!1,scrollIsLeft=!1,scrollIsRight=!1,lastPageYOffset=window.pageYOffset,lastPageXOffset=window.pageXOffset,scroll=null}},{key:"down",get:function(){return scrollIsDown}},{key:"up",get:function(){return scrollIsUp}},{key:"left",get:function(){return scrollIsLeft}},{key:"right",get:function(){return scrollIsRight}}]),t}();function encodeBase64(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!dist.Assert.isString(t))throw new Error("Cannot encode non-string values.");var n=window.btoa(t);return e?n.replace(/=/g,""):n}function decodeBase64(t){if(!dist.Assert.isString(t))throw new Error("Cannot encode non-string values.");return window.atob(t)}function encodeUtf8(t){if(!dist.Assert.isString(t))throw new Error("Cannot encode non-string values.");return decodeURIComponent(encodeURIComponent(t))}function decodeUtf8(t){if(!dist.Assert.isString(t))throw new Error("Cannot decode non-string values.");return decodeURIComponent(encodeURIComponent(t))}var Json=function(){function Json(){_classCallCheck(this,Json)}return _createClass(Json,null,[{key:"serialize",value:function(t){if(!dist.Assert.isFunction(t)){if(!dist.Assert.exists(t))return t;if(!dist.Assert.isArray(t)&&!dist.Assert.isObject(t))return t.toString();var e=dist.Assert.isArray(t)?"[{0}]":"{{0}}",n=[];return Object.keys(t).forEach((function(e){var r=t[e];if(!dist.Assert.isUndefined(r)){var i=dist.Assert.isNumber(r)?r:dist.Assert.isDate(r)?'"'.concat(dist.DayPoint.parse(r).toJson(),'"'):dist.Assert.isString(r)?'"'.concat(serializeString(r),'"'):Json.serialize(r);n[n.length]=(dist.Assert.isObject(t)&&!dist.Assert.isArray(t)?'"'.concat(e,'"')+":":"")+i}})),dist.string.format(e,n)}}},{key:"deserialize",value:function(t){return/function|(=$)/i.test(t)?t:Json.deserialize_unsafe(t)}},{key:"deserialize_unsafe",value:function deserialize_unsafe(value){try{var result=dist.Assert.isString(value)?eval("(".concat(deserializeString(value),")")):value;return dist.Assert.exists(result)?dist.Assert.isNullOrEmpty(result.tagName)&&(dist.Assert.isObject(result)||dist.Assert.isArray(result))?(Object.keys(result).forEach((function(t){var e=result[t];(dist.Assert.isObject(e)||dist.Assert.isArray(e))&&(result[t]=Json.deserialize(e)),/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e)&&dist.DayPoint.canParse(e)&&(result[t]=dist.DayPoint.parse(e).toDate())})),result):/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(result)?dist.DayPoint.parse(result).toDate():result:result}catch(t){throw new Error(dist.string.format("Cannot deserialize {0}",value))}}},{key:"encode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return encodeBase64(Json.serialize(t),e)}catch(e){throw new Error(dist.string.format("Cannot encode {0}",t))}}},{key:"decode",value:function(t){try{return Json.deserialize(decodeBase64(t))}catch(e){throw new Error(dist.string.format("Cannot decode {0}",t))}}}]),Json}();function serializeString(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\//g,"/").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")}function deserializeString(t){return t.replace(/\\\//g,"/").replace(/\\\\f/g,"\\f").replace(/\\\\n/g,"\\n").replace(/\\\\r/g,"\\r").replace(/\\\\t/g,"\\t")}var QueryString=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"serialize",value:function(t){try{var e="";return Object.keys(t).forEach((function(n){var r=t[n],i=dist.Assert.isDate(r)?dist.DayPoint.parse(r).toJson():r;e+=dist.string.format("&{0}={1}",encodeURIComponent(n),encodeURIComponent(Json.serialize(i)))})),e.replace(/^&/,"")}catch(e){throw new Error(dist.string.format("Cannot serialize {0}",t))}}},{key:"deserialize",value:function(t){if(/\??\w+=\w+/.test(t)){var e=t.replace(/.*\?/,"").split("&"),n={};return e.forEach((function(t){var e=_slicedToArray(t.split("="),2),r=e[0],i=e[1],o=/^null$|^true$|^false$|^\d+(\.\d+?)?$|^\[.*]$|^{.*}$/.test(i)?i:'"'.concat(i,'"');n[decodeURIComponent(r)]=Json.deserialize(decodeURIComponent(o))})),n}}}]),t}(),Dto=function(){function t(e,n){_classCallCheck(this,t),this.value=e||{},this.name=n}return _createClass(t,[{key:"read",value:function(t){return this.value[t]}},{key:"remove",value:function(t){return dist.Assert.exists(t)&&delete this.value[t],this}},{key:"write",value:function(t,e){return this.value[t]=e,this}},{key:"update",value:function(t){return this.value=Object.assign(this.value,t),this}},{key:"save",value:function(){return window.localStorage.setItem(this.name,Json.encode(this.value,!0)),this}},{key:"saveAs",value:function(t){return this.name=t,this.save()}},{key:"delete",value:function(){return window.localStorage.removeItem(this.name),this}},{key:"encode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Json.encode(this.value,t)}},{key:"toFormData",value:function(){var t=this.value,e=new window.FormData;return Object.keys(t).forEach((function(n){return e.append(n,t[n])})),e}},{key:"toJson",value:function(){return Json.serialize(this.value)}},{key:"toQueryString",value:function(){return QueryString.serialize(this.value)}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}}],[{key:"decode",value:function(e,n){return new t(Json.decode(e),n)}},{key:"parseFormData",value:function(e){var n,r={},i=_createForOfIteratorHelper(e.entries());try{for(i.s();!(n=i.n()).done;){var o=_slicedToArray(n.value,2),a=o[0],u=o[1];r[a]=u}}catch(t){i.e(t)}finally{i.f()}return new t(r)}},{key:"parseJson",value:function(e){return new t(Json.deserialize(e))}},{key:"parseQueryString",value:function(e){return new t(QueryString.deserialize(e))}},{key:"load",value:function(e){return t.decode(window.localStorage.getItem(e),e)}}]),t}(),Event=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"mute",value:function(t){return!!dist.Assert.exists(t)&&(dist.Assert.isFunction(t.preventDefault)&&t.preventDefault(),dist.Assert.isFunction(t.stopPropagation)&&t.stopPropagation(),dist.Assert.isFunction(t.stopImmediatePropagation)&&t.stopImmediatePropagation(),dist.Assert.exists(t.cancelBubble)&&(t.cancelBubble=!0),!1)}}]),t}(),readData=function(t){return new window.FormData(t)},read=function(t){var e={};try{readData(t).forEach((function(t,n){var r=e[n];dist.Assert.isArray(r)?e[n].push(t):dist.Assert.exists(r)?e[n]=[e[n],t]:e[n]=t}))}catch(n){_toConsumableArray(t.elements).forEach((function(t){var n=t.name,r=t.type,i=t.value,o=t.files;if("file"===r)e[n]=o[0];else if("checkbox"===r||"radio"===r)t.checked&&(e[n]=i);else if(t.multiple){var a=[];t.querySelectorAll("option").forEach((function(t){return t.selected&&a.push(t.value)})),e[n]=a.length<2?a[0]:a}else e[n]=i}))}return e},readJson=function(t){return JSON.stringify(read(t))},write=function(t,e){t.querySelectorAll("input, textarea").forEach((function(t){dist.Assert.exists(e[t.name])&&("checkbox"===t.type||"radio"===t.type?t.checked=e[t.name]===t.value:t.value=e[t.name])})),t.querySelectorAll("select").forEach((function(t){dist.Assert.isArray(e[t.name])?_toConsumableArray(t.options).forEach((function(n){n.selected=e[t.name].indexOf(n.value)>=0})):dist.Assert.exists(e[t.name])&&(t.value=e[t.name])}))},index={read:read,readData:readData,readJson:readJson,write:write},Key=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,t),this.key=e,this.msKey=n||e,this.altKey=r.altKey||!1,this.ctrlKey=r.ctrlKey||!1,this.metaKey=r.metaKey||!1,this.shiftKey=r.shiftKey||!1}return _createClass(t,[{key:"equals",value:function(e){return e instanceof t&&this.altKey===e.altKey&&this.ctrlKey===e.ctrlKey&&this.metaKey===e.metaKey&&this.shiftKey===e.shiftKey&&(this.key===e.key||this.msKey===e.msKey)}},{key:"didFire",value:function(e){var n=e.code,r=e.key,i=e.altKey,o=e.ctrlKey,a=e.metaKey,u=e.shiftKey,s="Dead"===r?n:r;return e&&("ANY"===this.key||this.equals(new t(s,s,{altKey:i,ctrlKey:o,metaKey:a,shiftKey:u})))}},{key:"alt",get:function(){return new t(this.key,this.msKey,{altKey:!0,ctrlKey:this.ctrlKey,metaKey:this.metaKey,shiftKey:this.shiftKey})}},{key:"ctrl",get:function(){return new t(this.key,this.msKey,{altKey:this.altKey,ctrlKey:!0,metaKey:this.metaKey,shiftKey:this.shiftKey})}},{key:"meta",get:function(){return new t(this.key,this.msKey,{altKey:this.altKey,ctrlKey:this.ctrlKey,metaKey:!0,shiftKey:this.shiftKey})}},{key:"shift",get:function(){return new t(this.key,this.msKey,{altKey:this.altKey,ctrlKey:this.ctrlKey,metaKey:this.metaKey,shiftKey:!0})}}],[{key:"press",get:function(){return"keypress"}},{key:"down",get:function(){return"keydown"}},{key:"up",get:function(){return"keyup"}},{key:"any",get:function(){return new t("ANY")}},{key:"esc",get:function(){return new t("Escape","Esc")}},{key:"enter",get:function(){return new t("Enter")}},{key:"space",get:function(){return new t(" ","Spacebar")}},{key:"tab",get:function(){return new t("Tab")}},{key:"left",get:function(){return new t("ArrowLeft","Left")}},{key:"right",get:function(){return new t("ArrowRight","Right")}}]),t}(),Keyboard=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"on",value:function(t,e,n,r){var i=function(t){return e.didFire(t)?n(t,e):null};return window.addEventListener(t,i,r),{unsubscribe:function(){window.removeEventListener(t,i)}}}},{key:"onKeyPress",value:function(e,n,r){return t.on(Key.press,e,n,r)}},{key:"onKeyDown",value:function(e,n,r){return t.on(Key.down,e,n,r)}},{key:"onKeyUp",value:function(e,n,r){return t.on(Key.up,e,n,r)}}]),t}(),Swipe=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this.didTouchStart=this.didTouchStart.bind(this),this.didTouchEnd=this.didTouchEnd.bind(this),this.didTouchMove=this.didTouchMove.bind(this),e.addEventListener("touchstart",this.didTouchStart,{capture:!1,passive:!0}),e.addEventListener("touchend",this.didTouchEnd,{capture:!1,passive:!0}),e.addEventListener("touchmove",this.didTouchMove,{capture:!1,passive:!0}),this.element=e,this.tolerance=n,this.didSwipeLeft=function(){},this.didSwipeRight=function(){},this.didMove=function(){}}return _createClass(t,[{key:"onLeft",value:function(t){return this.didSwipeLeft=t,this}},{key:"onRight",value:function(t){return this.didSwipeRight=t,this}},{key:"onMove",value:function(t){return this.didMove=t,this}},{key:"destroy",value:function(){var t=this.element;return t.removeEventListener("touchstart",this.didTouchStart,!1),t.removeEventListener("touchend",this.didTouchEnd,!1),t.removeEventListener("touchmove",this.didTouchMove,!1),this}},{key:"didTouchStart",value:function(t){var e=_slicedToArray(t.touches,1)[0];this.touchStartPoint=new dist.Point(e.pageX,e.pageY)}},{key:"didTouchEnd",value:function(t){var e=_slicedToArray(t.changedTouches,1)[0],n=this.touchStartPoint,r=new dist.Point(e.pageX,e.pageY);r.isLeftOf(n)&&Math.abs(r.distanceFrom(n).x)>this.tolerance&&this.didSwipeLeft(t),r.isRightOf(n)&&Math.abs(r.distanceFrom(n).x)>this.tolerance&&this.didSwipeRight(t)}},{key:"didTouchMove",value:function(t){var e=_slicedToArray(t.touches,1)[0],n=this.touchStartPoint,r=new dist.Point(e.pageX,e.pageY);this.didMove({distance:r.distanceFrom(n),up:r.isAbove(n),down:r.isBelow(n),left:r.isLeftOf(n),right:r.isRightOf(n)})}}]),t}();exports.Cookie=Cookie,exports.Device=Device,exports.Document=Document,exports.Dto=Dto,exports.Event=Event,exports.Key=Key,exports.Keyboard=Keyboard,exports.Swipe=Swipe,exports.decodeBase64=decodeBase64,exports.decodeUtf8=decodeUtf8,exports.encodeBase64=encodeBase64,exports.encodeUtf8=encodeUtf8,exports.form=index}));class t{constructor(t=""){this.$byteString=t}getByteAt(t){return this.$byteString.charCodeAt(t)}getLength(){return this.$byteString.length}getStringAt(t,e){return this.$byteString.substring(t,t+e)}getShortAt(t,e){const n=this.$byteString,r=n.charCodeAt(t)||0,i=n.charCodeAt(t+1)||0;return e?(r<<8)+i:(i<<8)+r}getLongAt(t,e){const n=this.$byteString,r=n.charCodeAt(t)||0,i=n.charCodeAt(t+1)||0,o=n.charCodeAt(t+2)||0,a=n.charCodeAt(t+3)||0,u=e?(((r<<8)+i<<8)+o<<8)+a:(((a<<8)+o<<8)+i<<8)+r;return u<0?u+4294967296:u}getSLongAt(t,e){const n=this.getLongAt(t,e);return n>2147483647?n-4294967296:n}}class e{static isNull(t){return null===t}static isEmpty(t){return e.isString(t)&&""===t||e.isArray(t)&&t.length<1||e.isObjectLiteral(t)&&Object.keys(t).length<1}static isUndefined(t){return void 0===t}static isZero(t){return 0===t}static exists(t){return!(e.isUndefined(t)||e.isNull(t))}static isNullOrEmpty(t){return!e.exists(t)||e.isEmpty(t)}static isArray(t){return Array.isArray(t)}static isBool(t){return"boolean"==typeof t}static isTrue(t){return e.isBool(t)&&!0===t}static isFalse(t){return e.isBool(t)&&!1===t}static isDate(t){return t instanceof Date}static isNumber(t){return("number"==typeof t||t instanceof Number)&&!isNaN(t)}static isEven(t){return this.isNumber(t)&&!this.isZero(t)&&t%2==0}static isOdd(t){return this.isNumber(t)&&!this.isZero(t)&&!this.isEven(t)}static isString(t){return"string"==typeof t||t instanceof String}static isFunction(t){return t instanceof Function}static isAsyncFunction(t){try{return"AsyncFunction"===Object.getPrototypeOf(t).constructor.name||e.isFunction(t)&&/^async/.test(t.toString())||e.isFunction(t().then)}catch(t){return!1}}static isPromise(t){return t instanceof Promise}static isObject(t){return e.exists(t)&&"object"==typeof t&&!(e.isBool(t)||e.isNumber(t)||e.isDate(t)||e.isArray(t)||e.isString(t)||e.isFunction(t))}static isObjectLiteral(t){return e.isObject(t)&&t.constructor==={}.constructor}static isTruthy(t){return!e.isFalsy(t)}static isFalsy(t){return e.isZero(t)||e.isFalse(t)||e.isNullOrEmpty(t)||isNaN(t)}}function r(t){return e.exists(t)&&e.isFunction(t.replace)?t.replace(/^[\s\n]*/,""):t}function n(t){return e.exists(t)&&e.isFunction(t.replace)?t.replace(/[\s\n]*$/,""):t}function i(t,e=0){const n=Math.pow(10,-e);return Math.round(parseFloat((t*n).toFixed(Math.abs(e))))/n}function o(t,e=0){return i(t+5*Math.pow(10,e-1),e)}function s(t,e=0){return 0===t?0:i(t-5*Math.pow(10,e-1),e)}function a(t){const e=(t,n=0,r=1)=>0<t?e(--t,r,n+r):n;return e(t)}function u(t){let e=0,n=1,r=0;for(;t>1;)r=e,e=n,n+=r,t--;return t<1?e:n}function c(){return Math.random().toString().substr(2)}function l(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}Object.freeze({__proto__:null,build:function(...t){return"".concat(...t)},chunk:function(t,n=0){if(!e.isString(t)||Number.isNaN(n)||n<0)return[];if(n<t.length){let e=0;const r=n||t.length,i=[];for(;e<t.length;)i.push(t.slice(e,e+r)),e+=r;return i}return[t]},format:function(t,...e){return e.reduce(((t,e,n)=>t.replace(new RegExp(`\\{${n}\\}`,"g"),e&&e.toString?e.toString():e)),t)},trim:function(t){return r(n(t))},trimStart:r,trimEnd:n,capitalize:function(t=""){return(t||"").charAt(0).toUpperCase()+(t||"").slice(1).toLowerCase()},mask:function(t,n,r="_"){return e.isFunction(n)?n(t):e.isString(n)&&t.split("").reduce(((t,e)=>t.replace(new RegExp(r),e)),n)},unmask:function(t,n,r="_"){const i=new RegExp(r);return e.isFunction(n)?n(t):e.isString(n)&&t.split("").reduce(((t,e,r)=>!i.test(e)&&i.test(n.charAt(r))?t+e:t),"")}}),Object.freeze({__proto__:null,random:function(t=0,e=1){return Math.random()*(e-t)+t},round:i,roundUp:o,roundDown:s,roundTowardZero:function(t,e=0){return t<0?o(t,e):s(t,e)},gcd:function t(e,n){return 0===n?Math.abs(e):t(n,e%n)},fib:a,fib2:u,fibArray:function(t){return Array(t).fill(0).map((()=>a(--t))).reverse()},fib2Array:function(t){return Array(t).fill(0).map((()=>u(--t))).reverse()},tryParseInt:function(t,e=0){const n=parseInt(t);return Number.isNaN(n)?e:n},tryParseFloat:function(t,e=0){const n=parseFloat(t);return Number.isNaN(n)?e:n}}),Object.freeze({__proto__:null,uid:c,uuid:l,suid:function(){return Symbol(c())},suuid:function(){return Symbol(l())}}),Object.freeze({__proto__:null,pattern:t=>t.toString().replace(/(^\/)|(\/$)/g,"").replace(/\\/g,"\\"),escape:t=>t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),alpha:/^[A-z]+$/,alphaNumeric:/^[A-z0-9]+$/,base64:/^[A-z0-9=]+$/,dataUrl:/^\s*data:([a-z]+\/[a-z0-9+-]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=._~:@/?%\s-]*\s*$/i,email:/^\w+([.\w-]+)?@\w+([.\w-]+)?\.[A-Za-z0-9]{2,}$/,empty:/^$/,numeric:/^-?[0-9]+$/,script:/(<script[A-z0-9\n\s\t\r.={([\])}'",;!&|$/#:<>*?+\u0000-\u0037\u00C2\u00A0\u2122-]*?<\/script>)/,uid:/^\d{14,}$/i,url:/^(https?:\/\/)?[^{}\\:]+\.[A-z0-9]{2,12}(\/[^?\s]+)*\/?(\?([^=?#]+=[^=?#]*(&[^=?#]+=[^=?#]*)*(#.*)?)?)?$/,uuid:/^[{(]?[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}[)}]?$/i});var d={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},g={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},f={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},h={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"};function S(t,n){if(!function(t,e){return"Exif"===t.getStringAt(e,4)}(t,n))return{};const r=n+6,i=19789===t.getShortAt(r),o=function(t,e,n){return function(t,e,n){return 42===t.getShortAt(e+2,n)||8===t.getLongAt(e+4,n)}(t,e,n)?p(t,e,e+8,h,n):{}}(t,r,i),a=function(t,n,r,i){if(!e.exists(r))return{};const o=p(t,n,n+r,d,i),a={};for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const n=o[t];if(!e.exists(n))continue;switch(t){case"FileSource":o[t]=f[t][n];break;case"FlashpixVersion":o[t]=String.fromCharCode(n[0],n[1],n[2],n[3]);break;case"ComponentsConfiguration":{const e=f.Components;o[t]=e[n[0]]+e[n[1]]+e[n[2]]+e[n[3]];break}}a[t]=o[t]}return a}(t,r,o.ExifIFDPointer,i),u=function(t,n,r,i){if(!e.exists(r))return{};const o=p(t,n,n+r,g,i),a={};for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t)){const n=o[t];if(!e.exists(n))continue;switch(t){case"GPSVersionID":o[t]=`${n[0]}.${n[1]}.${n[2]}.${n[3]}`}a[t]=o[t]}return a}(t,r,o.GPSInfoIFDPointer,i);return Object.assign({},o,a,u)}function p(t,e,n,r,i){const o=t.getShortAt(n,i),a={};let u,s;for(let c=0;c<o;c++)u=n+12*c+2,s=r[t.getShortAt(u,i)]||`UNDEF_Proprietary_data_${n}_${c}`,a[s]=m(t,u,e,n,i);return a}function m(t,e,n,r,i){const o=t.getShortAt(e+2,i),a=t.getLongAt(e+4,i),u=t.getLongAt(e+8,i)+n;let s,c,l,f,h;switch(o){case 2:return s=a>4?u:e+8,t.getStringAt(s,a-1);case 3:if(1===a)return t.getShortAt(e+8,i);for(s=a>2?u:e+8,f=[],h=0;h<a;h++)f[h]=t.getShortAt(s+2*h,i);return f;case 4:if(1===a)return t.getLongAt(e+8,i);for(f=[],h=0;h<a;h++)f[h]=t.getLongAt(u+4*h,i);return f;case 5:if(1===a)return c=t.getLongAt(u,i),l=t.getLongAt(u+4,i),c/l;for(f=[],h=0;h<a;h++)c=t.getLongAt(u+8*h,i),l=t.getLongAt(u+4+8*h,i),f[h]=c/l;return f;case 7:if(1===a)return t.getByteAt(e+8,i);for(s=a>4?u:e+8,f=[],h=0;h<a;h++)f[h]=t.getByteAt(s+h);return f;case 9:if(1===a)return t.getSLongAt(e+8,i);for(f=[],h=0;h<a;h++)f[h]=t.getSLongAt(u+4*h,i);return f;case 10:if(1===a)return t.getSLongAt(u,i)/t.getSLongAt(u+4,i);for(f=[],h=0;h<a;h++)f[h]=t.getSLongAt(u+8*h,i)/t.getSLongAt(u+4+8*h,i);return f;default:return null}}function y(t,e){return 255===t.getByteAt(e)}function A(t){return 225===t}const F={__INVALID_FILE__:"Cannot read EXIF data."};function P(n){if(!(n instanceof t))throw new Error("EXIF can only read a valid BinaryFile.");try{return function(t){return e.exists(t)&&255===t.getByteAt(0)&&216===t.getByteAt(1)}(n)?function(t){const e=t.getLength();let n,r=2;for(;r<e;){const e=r+4,i=t.getShortAt(r+2,!0)+2;if(y(t,r)&&(n=t.getByteAt(r+1),A(n)))return S(t,e);r+=i}}(n)||F:(function(t){e.exists(t)&&137===t.getByteAt(0)&&80===t.getByteAt(1)&&78===t.getByteAt(2)&&71===t.getByteAt(3)&&13===t.getByteAt(4)&&10===t.getByteAt(5)&&26===t.getByteAt(6)&&t.getByteAt(7)}(n),F)}catch(t){return console.error(t),F}}var dist=createCommonjsModule((function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var i=s(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(e,"__esModule",{value:!0});var y=function(){function t(){i(this,t)}return a(t,null,[{key:"isNull",value:function(t){return null===t}},{key:"isEmpty",value:function(e){return t.isString(e)&&""===e||t.isArray(e)&&e.length<1||t.isObjectLiteral(e)&&Object.keys(e).length<1}},{key:"isUndefined",value:function(t){return void 0===t}},{key:"isZero",value:function(t){return 0===t}},{key:"exists",value:function(e){return!(t.isUndefined(e)||t.isNull(e))}},{key:"isNullOrEmpty",value:function(e){return!t.exists(e)||t.isEmpty(e)}},{key:"isArray",value:function(t){return Array.isArray(t)}},{key:"isBool",value:function(t){return"boolean"==typeof t}},{key:"isTrue",value:function(e){return t.isBool(e)&&!0===e}},{key:"isFalse",value:function(e){return t.isBool(e)&&!1===e}},{key:"isDate",value:function(t){return t instanceof Date}},{key:"isNumber",value:function(t){return("number"==typeof t||t instanceof Number)&&!isNaN(t)}},{key:"isEven",value:function(t){return this.isNumber(t)&&!this.isZero(t)&&t%2==0}},{key:"isOdd",value:function(t){return this.isNumber(t)&&!this.isZero(t)&&!this.isEven(t)}},{key:"isString",value:function(t){return"string"==typeof t||t instanceof String}},{key:"isFunction",value:function(t){return t instanceof Function}},{key:"isAsyncFunction",value:function(e){try{return"AsyncFunction"===Object.getPrototypeOf(e).constructor.name||t.isFunction(e)&&/^async/.test(e.toString())||t.isFunction(e().then)}catch(e){return!1}}},{key:"isPromise",value:function(t){return t instanceof Promise}},{key:"isObject",value:function(e){return t.exists(e)&&"object"===n(e)&&!(t.isBool(e)||t.isNumber(e)||t.isDate(e)||t.isArray(e)||t.isString(e)||t.isFunction(e))}},{key:"isObjectLiteral",value:function(e){return t.isObject(e)&&e.constructor==={}.constructor}},{key:"isTruthy",value:function(e){return!t.isFalsy(e)}},{key:"isFalsy",value:function(e){return t.isZero(e)||t.isFalse(e)||t.isNullOrEmpty(e)||isNaN(e)}}]),t}();function v(){var t;return(t="").concat.apply(t,arguments)}function p(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e,n){return t.replace(new RegExp("\\{".concat(n,"\\}"),"g"),e&&e.toString?e.toString():e)}),t)}function g(t){return m(w(t))}function m(t){return y.exists(t)&&y.isFunction(t.replace)?t.replace(/^[\s\n]*/,""):t}function w(t){return y.exists(t)&&y.isFunction(t.replace)?t.replace(/[\s\n]*$/,""):t}var b,k,_,S=Object.freeze({__proto__:null,build:v,chunk:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!y.isString(t)||Number.isNaN(e)||e<0)return[];if(e<t.length){for(var n=0,r=e||t.length,i=[];n<t.length;)i.push(t.slice(n,n+r)),n+=r;return i}return[t]},format:p,trim:g,trimStart:m,trimEnd:w,capitalize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(t||"").charAt(0).toUpperCase()+(t||"").slice(1).toLowerCase()},mask:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_";return y.isFunction(e)?e(t):y.isString(e)&&t.split("").reduce((function(t,e){return t.replace(new RegExp(n),e)}),e)},unmask:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_",r=new RegExp(n);return y.isFunction(e)?e(t):y.isString(e)&&t.split("").reduce((function(t,n,i){return!r.test(n)&&r.test(e.charAt(i))?t+n:t}),"")}}),A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";i(this,t),this._first=e||"",this._middle=n||"",this._last=r||""}return a(t,[{key:"equals",value:function(t){return y.exists(t)&&t.first===this.first&&t.middle===this.middle&&t.last===this.last}},{key:"toString",value:function(t){var e=this.first.charAt(0),n=this.middle.charAt(0),r=this.last.charAt(0);return y.isNullOrEmpty(t)?this.full:t.replace(/([FfMmLl])/g,"{$1}").replace("{F}",this.first).replace("{M}",this.middle).replace("{L}",this.last).replace("{f}",e).replace("{m}",n).replace("{l}",r)}},{key:"first",get:function(){return this._first}},{key:"middle",get:function(){return this._middle}},{key:"last",get:function(){return this._last}},{key:"full",get:function(){var t=y.isNullOrEmpty(this.middle)?"F L":"F M L";return g(this.toString(t).replace(/\s+/," "))}},{key:"initials",get:function(){var t=y.isNullOrEmpty(this.middle)?"f.l.":"f.m.l.";return g(this.toString(t).replace(/\s{2,}/,""))}}]),t}(),x=function(){function t(e){i(this,t),this._list=e,this._head=0}return a(t,[{key:"isEmpty",get:function(){return this.length<1}},{key:"index",get:function(){return this._head}},{key:"length",get:function(){return this._list.length}},{key:"current",get:function(){return this._list[this._head]}},{key:"next",get:function(){var t=this.length,e=this._head;return this._head=e++<t-1?e:0,this.current}},{key:"prev",get:function(){var t=this.length,e=this._head;return this._head=--e<0?t-1:e,this.current}},{key:"peekNext",get:function(){var t=this._head,e=this.length;return this._list[t+1<e?t+1:0]}},{key:"peekPrev",get:function(){var t=this._head,e=this.length;return this._list[t-1<0?e-1:t-1]}}]),t}();function P(t,e){try{return t()}catch(t){return e}}P.async=(b=regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})),k=function(){var t=this,e=arguments;return new Promise((function(n,i){var o=b.apply(t,e);function a(t){r(o,n,i,a,u,"next",t)}function u(t){r(o,n,i,a,u,"throw",t)}a(void 0)}))},function(t,e){return k.apply(this,arguments)});var O=function(){function t(e,n,r){if(i(this,t),n<1||n>12)throw new Error("Invalid month at Assert.DayPoint");if(r<1||r>F(n,e))throw new Error("Invalid date at DayPoint");this._value=arguments.length>=3?new Date(e,n-1,r):new Date,this._day=this._value.getDay(),this._date=r,this._month=n,this._year=e}return a(t,[{key:"add",value:function(t,e,n){function r(t,e,n){for(var r=t,i=e;i--;)r=r[n];return r}var i=Math.abs,o=i(t),a=i(n),u=i(e),s=n<0?"prevDay":"nextDay",c=e<0?"prevMonth":"nextMonth";return r(r(r(this,o,t<0?"prevYear":"nextYear"),u,c),a,s)}},{key:"isBefore",value:function(t){return!(this.isAfter(t)||this.equals(t))}},{key:"isAfter",value:function(t){var e=this._year,n=t.year,r=this._month,i=t.month;return e>n||e===n&&r>i||e===n&&r===i&&this._date>t.date}},{key:"equals",value:function(t){return this._year===t.year&&this._month===t.month&&this._date===t.date}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mm/dd/yyyy",e=/y{3,}/i.test(t)?this._year:this.shortYear,n=this._month,r=this._date,i="{0}",o=/m{2}/i.test(t)&&n<10?"0{1}":"{1}",a=/d{2}/i.test(t)&&r<10?"0{2}":"{2}",u=t.replace(/y+/gi,i).replace(/m+/gi,o).replace(/d+/gi,a);return p(u,e,n,r)}},{key:"toDate",value:function(){return this._value}},{key:"toJson",value:function(){return this._value.toJSON()}},{key:"value",get:function(){return this._value}},{key:"day",get:function(){return this._day}},{key:"date",get:function(){return this._date}},{key:"month",get:function(){return this._month}},{key:"year",get:function(){return this._year}},{key:"shortYear",get:function(){var t=this._year.toString();return parseInt(t.substr(t.length-2))}},{key:"isWeekday",get:function(){var t=this._day;return t>0&&t<6}},{key:"isWeekend",get:function(){return!this.isWeekday}},{key:"isLeapYear",get:function(){return C(this._year)}},{key:"nextDay",get:function(){return D(this,1,0,0)}},{key:"prevDay",get:function(){return D(this,-1,0,0)}},{key:"nextMonth",get:function(){return D(this,0,1,0)}},{key:"prevMonth",get:function(){return D(this,0,-1,0)}},{key:"nextYear",get:function(){return D(this,0,0,1)}},{key:"prevYear",get:function(){return D(this,0,0,-1)}},{key:"firstDayOfMonth",get:function(){return new t(this._year,this._month,1)}},{key:"lastDayOfMonth",get:function(){return new t(this._year,this._month,F(this._month,this._year))}}],[{key:"canParse",value:function(e){return y.isString(e)||y.isNumber(e)||y.isDate(e)?!isNaN(new Date(e).valueOf()):e instanceof t}},{key:"parse",value:function(e){if(e instanceof t)return e;var n=y.isString(e)?g(e).replace(/T\d{2}:\d{2}:\d{2}(.\d+)?Z/,""):e;if(/^\d{4}-\d{1,2}-\d{1,2}$/.test(n)){var r=n.split("-"),i=h(r,1)[0];r.push(i),r.shift(),n=r.join("/")}var o=new Date(n);if(!y.exists(n)||Number.isNaN(o.valueOf()))throw new Error(p("Cannot parse value= {0}",n));return new t(o.getFullYear(),o.getMonth()+1,o.getDate())}},{key:"tryParse",value:function(e){return P((function(){return t.parse(e)}),null)}},{key:"assumeNow",value:function(e){_=t.parse(e)}},{key:"today",get:function(){return _||t.parse(new Date)}}]),t}();function F(t,e){return 2===t?C(e)?29:28:t<8&&y.isEven(t)||t>7&&y.isOdd(t)?30:31}function C(t){var e=t.toString().split(/\B/);return parseFloat(v(e[e.length-2],e[e.length-1]))%4==0}function D(t,e,n,r){var i=t.month,o=t.year,a=t.date,u=n,s=r,c=a+e,l=i+u,f=o+s;if(a+e>F(i,o)&&(c=1,l=i+u+1),a+e<1){var h=t.prevMonth;c=F(h.month,h.year),l=i+u-1}return l>12&&(l=1,f=o+s+1),l<1&&(l=12,f=o+s-1),new O(f,l,c)}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Math.pow(10,-e);return Math.round(parseFloat((t*n).toFixed(Math.abs(e))))/n}function N(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=5*Math.pow(10,e-1);return E(t+n,e)}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0===t)return 0;var n=5*Math.pow(10,e-1);return E(t-n,e)}function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t<0?N(t,e):I(t,e)}function T(t){return function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return 0<e?t(--e,r,n+r):n}(t)}function M(t){for(var e=0,n=1,r=0;t>1;)r=e,e=n,n+=r,t--;return t<1?e:n}function j(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseInt(t);return Number.isNaN(n)?e:n}var R=Object.freeze({__proto__:null,random:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.random()*(e-t)+t},round:E,roundUp:N,roundDown:I,roundTowardZero:B,gcd:function t(e,n){return 0===n?Math.abs(e):t(n,e%n)},fib:T,fib2:M,fibArray:function(t){return Array(t).fill(0).map((function(){return T(--t)})).reverse()},fib2Array:function(t){return Array(t).fill(0).map((function(){return M(--t)})).reverse()},tryParseInt:j,tryParseFloat:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=parseFloat(t);return Number.isNaN(n)?e:n}}),L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;if(i(this,t),!y.isNumber(e))throw new Error("Money requires valid numeric amount.");var r=B(e);this._cents=/\./.test(e)?parseFloat(e.toString().replace(/\d+\./,".")):0,this._dollars=r,this._currency=n||"$",this._value=e}return a(t,[{key:"add",value:function(e){return $(this,e),new t(this.value+e.value,this.currency)}},{key:"subtract",value:function(e){return $(this,e),new t(this.value-e.value,this.currency)}},{key:"multiply",value:function(e){if(!y.isNumber(e))throw new Error("Invalid factor ".concat(e));return new t(this.value*e,this.currency)}},{key:"divide",value:function(e){if(!y.isNumber(e))throw new Error("Invalid divisor ".concat(e));return new t(this.value/e,this.currency)}},{key:"equals",value:function(t){return this.isOfCurrency(t)&&this.value===t.value}},{key:"isGreaterThan",value:function(t){return $(this,t),this.value>t.value}},{key:"isLessThan",value:function(t){return $(this,t),this.value<t.value}},{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-2;return new t(E(this.value,e),this.currency)}},{key:"roundDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-2;return new t(I(this.value,e),this.currency)}},{key:"roundUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-2;return new t(N(this.value,e),this.currency)}},{key:"exchange",value:function(e,n){return new t(this.multiply(e).value,n)}},{key:"isOfCurrency",value:function(t){return this.currency===t.currency}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"d.c2",e=arguments.length>1?arguments[1]:void 0,n=/d(.)c(\d+)/.exec(t),r=h(n,3),i=r[1],o=r[2],a=e||{".":",",",":"."}[i],u=z(this.dollars,a||","),s=U(this.cents,j(o,2)),c="".concat(this.currency).concat(u).concat(i).concat(s);return this.value<0?"(".concat(c,")"):c}},{key:"cents",get:function(){return this._cents}},{key:"dollars",get:function(){return this._dollars}},{key:"currency",get:function(){return this._currency}},{key:"value",get:function(){return this._value}},{key:"nearestWhole",get:function(){return new t(E(this.value,0),this.currency)}},{key:"nearestDollar",get:function(){return this.nearestWhole}}],[{key:"zero",value:function(e){return new t(0,e)}},{key:"isMoney",value:function(e){return e instanceof t}},{key:"canParse",value:function(e){try{return t.parse(e),!0}catch(t){return!1}}},{key:"parse",value:function(e){if(y.isNumber(e))return new t(e);var n=e;if(/,\d{2}$/.test(e)){var r=e.split(","),i=r.pop(),o=r.join().replace(/\./g,",");n="".concat(o,".").concat(i)}var a=/(\(.*\))|(-)/.test(n),u=a?1:0,s=n.match(/[^\d.,-]/g),c=y.isArray(s)?s[u]:null,l=parseFloat(n.replace(/[^\d.]/g,""));return new t(a?-l:l,c)}},{key:"tryParse",value:function(e){return P((function(){return t.parse(e)}),null)}}]),t}();function $(t,e){if(!t.isOfCurrency(e))throw new Error("Invalid operation on non-conforming currencies. ".concat(t.currency," !== ").concat(e.currency))}function z(t,e){if(0===t)return"0";var n=t.toString().replace(/[^\d]/,"").split(/\B/),r=0;return n.reverse().reduce((function(t,n){return r>0&&!(r%3)&&(t.push(e),r=0),t.push(n),r++,t}),[]).reverse().join("").replace(/[^\d]$/,"")}function U(t,e){var n=t.toString().replace(/[^\d]|0\./g,""),r="0".repeat(e);return"".concat(n).concat(r).slice(0,e)}var K=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(i(this,t),!y.isNumber(e)||!y.isNumber(n))throw new Error("Coord requires numeric x and y values");this._x=e,this._y=n}return a(t,[{key:"equals",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"subtract",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"multiply",value:function(e){return new t(this.x*e.x,this.y*e.y)}},{key:"divide",value:function(e){return new t(this.x/e.x,this.y/e.y)}},{key:"round",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new t(E(this.x,e),E(this.y,e))}},{key:"toString",value:function(){return"(".concat(this.x,",").concat(this.y,")")}},{key:"x",get:function(){return this._x}},{key:"y",get:function(){return this._y}},{key:"value",get:function(){return{x:this.x,y:this.y}}},{key:"half",get:function(){return this.divide(new t(2,2))}},{key:"abs",get:function(){return new t(Math.abs(this.x),Math.abs(this.y))}}],[{key:"canParse",value:function(e){return y.isArray(e)?!(Number.isNaN(e[0])||Number.isNaN(e[1])):y.isObjectLiteral(e)&&"x"in e&&"y"in e?!(Number.isNaN(e.x)||Number.isNaN(e.y)):e instanceof t}},{key:"parse",value:function(e){return y.exists(e)?e instanceof t?e:y.isArray(e)?new t(e[0],e[1]):y.isObjectLiteral(e)&&y.exists(e.x)&&y.exists(e.y)?new t(e.x,e.y):null:null}},{key:"tryParse",value:function(e){return P((function(){return t.parse(e)}),null)}}]),t}(),Y=function(t){u(n,K);var e=f(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i(this,n),(t=e.call(this,r,o))._lengthSquared=Math.pow(r,2)+Math.pow(o,2),t._magnitude=Math.sqrt(t._lengthSquared),t._unitNormalX=0===r&&0===o?0:r/t._magnitude,t._unitNormalY=0===r&&0===o?0:o/t._magnitude,t}return a(n,[{key:"equals",value:function(t){return t instanceof n&&this.x===t.x&&this.y===t.y}},{key:"add",value:function(t){return t instanceof n?new n(this.x+t.x,this.y+t.y):null}},{key:"dot",value:function(t){return t instanceof n?this.x*t.x+this.y*t.y:null}},{key:"perpendicularAtTo",value:function(t){if(!(t instanceof n))return null;var e=t.add(this.projectionOfOnto(t).invert);return new n(e.x,e.y)}},{key:"projectionOfOnto",value:function(t){if(!(t instanceof n))return null;var e=t.normal.scale(this.dot(t.normal));return new n(e.x,e.y)}},{key:"scale",value:function(t){return new n(this.x*t,this.y*t)}},{key:"unitNormalDot",value:function(t){return t instanceof n?this.normal.x*t.normal.x+this.normal.y*t.normal.y:null}},{key:"reflect",value:function(t){if(!(t instanceof n))return null;if(t.isZero)return this;var e=t.normal;return this.add(e.scale(2*e.dot(this)).invert)}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new n(E(this.x,t),E(this.y,t))}},{key:"magnitude",get:function(){return this._magnitude}},{key:"isZero",get:function(){return 0===this.x&&0===this.y}},{key:"normal",get:function(){return new n(this._unitNormalX,this._unitNormalY)}},{key:"invert",get:function(){return new n(-this.x,-this.y)}},{key:"norm",get:function(){return new n(Math.abs(this.x),Math.abs(this.y))}},{key:"perpendicular",get:function(){return new n(-this.y,this.x)}}]),n}(),G=function(t){u(n,K);var e=f(n);function n(t,r){return i(this,n),e.call(this,t,r)}return a(n,[{key:"isAbove",value:function(t){return this.y<t.y}},{key:"isBelow",value:function(t){return this.y>t.y}},{key:"isLeftOf",value:function(t){return this.x<t.x}},{key:"isRightOf",value:function(t){return this.x>t.x}},{key:"distanceFrom",value:function(t){return new Y(this.x-t.x,this.y-t.y)}},{key:"distanceTo",value:function(t){return this.distanceFrom(t).invert}}],[{key:"canParse",value:function(t){return t instanceof n||K.canParse(t)}},{key:"parse",value:function(t){if(t instanceof n)return t;var e=K.parse(t);return new n(e.x,e.y)}},{key:"tryParse",value:function(t){return P((function(){return n.parse(t)}),null)}}]),n}(),W=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.origin=new G(e,n),this.dimensions=new K(r,o),this.diagonal=G.parse(this.origin.add(this.dimensions)),this.center=this.diagonal.half}return a(t,[{key:"contains",value:function(t){return this.origin.isAbove(t)&&this.origin.isLeftOf(t)&&this.diagonal.isRightOf(t)&&this.diagonal.isBelow(t)}},{key:"aspectToFit",value:function(e){var n=this.dimensions,r=e.dimensions,i=r.x,o=r.y,a=n.x,u=n.y;return a>u&&0!==a?(u*=i/a,a=i,u>o&&(a*=(u=o)/n.y)):u>o&&(a*=o/u,u=o),new t(this.origin.x,this.origin.y,a,u)}}]),t}();function X(){return Math.random().toString().substr(2)}function q(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}var J=Object.freeze({__proto__:null,uid:X,uuid:q,suid:function(){return Symbol(X())},suuid:function(){return Symbol(q())}}),Z=function(){function t(){if(i(this,t),this.constructor===t)throw new Error("Cannot instantiate abstract class: AbstractSpecification")}return a(t,[{key:"and",value:function(t){return new H(this,t)}},{key:"or",value:function(t){return new V(this,t)}},{key:"xor",value:function(t){return new Q(this,t)}},{key:"not",value:function(t){return new tt(this,t)}},{key:"isSatisfiedBy",value:function(){throw new Error("Abstract method must be implemented.")}}]),t}(),H=function(t){u(n,Z);var e=f(n);function n(t,r){var o;return i(this,n),(o=e.call(this))._specificationA=t,o._specificationB=r,o}return a(n,[{key:"isSatisfiedBy",value:function(t){return this._specificationA.isSatisfiedBy(t)&&this._specificationB.isSatisfiedBy(t)}}]),n}(),V=function(t){u(n,Z);var e=f(n);function n(t,r){var o;return i(this,n),(o=e.call(this))._specificationA=t,o._specificationB=r,o}return a(n,[{key:"isSatisfiedBy",value:function(t){return this._specificationA.isSatisfiedBy(t)||this._specificationB.isSatisfiedBy(t)}}]),n}(),Q=function(t){u(n,Z);var e=f(n);function n(t,r){var o;return i(this,n),(o=e.call(this))._specificationA=t,o._specificationB=r,o}return a(n,[{key:"isSatisfiedBy",value:function(t){return!this._specificationA.isSatisfiedBy(t)!=!this._specificationB.isSatisfiedBy(t)}}]),n}(),tt=function(t){u(n,Z);var e=f(n);function n(t){var r;return i(this,n),(r=e.call(this))._specification=t,r}return a(n,[{key:"isSatisfiedBy",value:function(t){return!this._specification.isSatisfiedBy(t)}}]),n}(),et=(function(t){u(n,Z);var e=f(n);function n(){return i(this,n),e.apply(this,arguments)}a(n,[{key:"isSatisfiedBy",value:function(){return!0}}])}(),function(t){u(n,Z);var e=f(n);function n(){return i(this,n),e.apply(this,arguments)}a(n,[{key:"isSatisfiedBy",value:function(){return!1}}])}(),function(){function t(){if(i(this,t),this.constructor===t)throw new Error("Cannot instantiate abstract class.")}return a(t,[{key:"execute",value:function(){throw new Error("Abstract method must be implemented.")}}]),t}()),nt=Object.freeze({__proto__:null,pattern:function(t){return t.toString().replace(/(^\/)|(\/$)/g,"").replace(/\\/g,"\\")},escape:function(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},alpha:/^[A-z]+$/,alphaNumeric:/^[A-z0-9]+$/,base64:/^[A-z0-9=]+$/,dataUrl:/^\s*data:([a-z]+\/[a-z0-9+-]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=._~:@/?%\s-]*\s*$/i,email:/^\w+([.\w-]+)?@\w+([.\w-]+)?\.[A-Za-z0-9]{2,}$/,empty:/^$/,numeric:/^-?[0-9]+$/,script:/(<script[A-z0-9\n\s\t\r.={([\])}'",;!&|$/#:<>*?+\u0000-\u0037\u00C2\u00A0\u2122-]*?<\/script>)/,uid:/^\d{14,}$/i,url:/^(https?:\/\/)?[^{}\\:]+\.[A-z0-9]{2,12}(\/[^?\s]+)*\/?(\?([^=?#]+=[^=?#]*(&[^=?#]+=[^=?#]*)*(#.*)?)?)?$/,uuid:/^[{(]?[0-9A-F]{8}[-]?([0-9A-F]{4}[-]?){3}[0-9A-F]{12}[)}]?$/i}),rt=function(){function t(e){i(this,t),this._milliseconds=e}return a(t,[{key:"onInterval",value:function(t){return this.clear(),this._didInterval=t,this}},{key:"start",value:function(){var t=this;return this.clear(),this._intervalId=setInterval((function(){t._didInterval()}),this._milliseconds),this}},{key:"clear",value:function(){return clearInterval(this._intervalId),this._intervalId=null,this}},{key:"isRunning",get:function(){return y.exists(this._intervalId)}}]),t}(),it=function(){function t(e){i(this,t),this._milliseconds=e}return a(t,[{key:"onTimeout",value:function(t){return this.clear(),this._didTimeout=t,this}},{key:"start",value:function(){var t=this;return this.clear(),this._timeoutId=setTimeout((function(){t._didTimeout()}),this._milliseconds),this}},{key:"clear",value:function(){return clearTimeout(this._timeoutId),this._timeoutId=null,this}},{key:"isRunning",get:function(){return y.exists(this._timeoutId)}}]),t}();e.AbstractSpecification=Z,e.AbstractStrategy=et,e.Assert=y,e.Coord=K,e.DayPoint=O,e.Interval=rt,e.Money=L,e.Name=A,e.Point=G,e.Rectangle=W,e.Rolodex=x,e.Timeout=it,e.Vector=Y,e.debounce=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var u=r&&!n,s=function(){n=null,r||t.apply(void 0,o)};clearTimeout(n),n=setTimeout(s,e),u&&t.apply(void 0,o)}},e.deduplicate=function(t){return t.reduce((function(t,e){return t.includes(e)||t.push(e),t}),[])},e.feature=function(t,e){return y.isPromise(t)||y.isAsyncFunction(t)?y.isFunction(t.then)?t.then((function(t){return t&&e()})):t().then((function(t){return t&&e()})):y.isFunction(t)&&t?t()&&e():y.isTrue(t)&&e()},e.identity=J,e.math=R,e.nextTick=function(t){return setTimeout(t,0)},e.opt=P,e.regex=nt,e.string=S,e.wait=function(t){return new Promise((function(e){return setTimeout(e,t)}))}}));function createBlobFromBinaryArray(t,e){try{return new window.Blob([t],{type:e})}catch(c){var n=window,r=n.BlobBuilder,i=n.WebKitBlobBuilder,o=n.MozBlobBuilder,a=n.MSBlobBuilder,u=r||i||o||a;if("TypeError"===c.name&&dist.Assert.exists(u)){var s=new u;return s.append(t.buffer),s.getBlob(e)}return"InvalidStateError"===c.name?new window.Blob([t.buffer],{type:e}):null}}function createBlobFromDataUrl(t){for(var e=t.split(","),n=e[0].indexOf("base64")>=0?dist_1.decodeBase64(e[1]):decodeURIComponent(e[1]),r=n.length,i=_slicedToArray(e[0].split(":")[1].split(";"),1)[0],o=new Uint8Array(r),a=0;a<r;a++)o[a]=n.charCodeAt(a);return createBlobFromBinaryArray(o,i)}var index=Object.freeze({__proto__:null,createBlobFromBinaryArray:createBlobFromBinaryArray,createBlobFromDataUrl:createBlobFromDataUrl}),BinaryFile=function(t){_inherits(n,t);var e=_createSuper(n);function n(t){return _classCallCheck(this,n),e.call(this,t)}return _createClass(n,[{key:"toBlob",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.$byteString,n=512,r=[],i=0;i<e.length;i+=n){for(var o=e.slice(i,i+n),a=new Array(o.length),u=0;u<o.length;u++)a[u]=o.charCodeAt(u);var s=new Uint8Array(a);r.push(s)}return createBlobFromBinaryArray(r,t)}}],[{key:"parseDataUrl",value:function(t){var e=t.replace(/data:image\/.*;base64,/,"");return new n(dist_1.decodeBase64(e))}}]),n}(t);function readExifDataInDataUrl(t){if(!dist.Assert.exists(t))throw new Error("Cannot get exif data for an invalid dataUrl.");return P(BinaryFile.parseDataUrl(t))}var index$1=Object.freeze({__proto__:null,readExifDataInDataUrl:readExifDataInDataUrl});function blobFromSrc(t,e){return new Promise((function(n,r){var i=0,o=dist.Assert.exists(e)?e:{},a=o.mimeType||"image/*",u=document.createElement("img"),s=/data:image\/.*;base64,/.test(t),c=o.maxAttempts||1;u.onload=function(){var t=o.orientation,e=u.naturalWidth,r=u.naturalHeight,i=new dist.Rectangle(0,0,e,r),s=dist.Assert.exists(o.resolution)?dist.Coord.parse({x:o.resolution.x||e,y:o.resolution.y||r}).value:{x:e,y:r},c=new dist.Rectangle(0,0,s.x,s.y),l=i.aspectToFit(c).dimensions,f=l.x,h=l.y,d=6===t||8===t?h:f,y=6===t||8===t?f:h,v=document.createElement("canvas");v.width=d,v.height=y;var p=v.getContext("2d");if(dist.Assert.isNumber(t)&&1!==t){var g,m=Math.PI/180;switch(t){case 3:g=180*m;break;case 6:g=90*m;break;case 8:g=-90*m;break;default:g=0}p.translate(d/2,y/2),p.rotate(g),p.drawImage(u,-y/2,-d/2,f,h)}else p.drawImage(u,0,0,f,h);try{var w=v.toDataURL(a,1);n(createBlobFromDataUrl(w))}catch(t){var b=v.toDataURL(a,1);n(createBlobFromDataUrl(b))}},u.onerror=function(){++i<c?u.src="".concat(t,"?retry=").concat(Math.random().toString().substr(2)):r(new Error("Cannot convert src to blob with src: ".concat(t)))},o.crossOrigin&&!s&&(u.setAttribute("crossOrigin","anonymous"),u.crossorigin="anonymous"),u.src=t}))}function dataUrlFromSrc(t,e){return blobFromSrc(t,e).then((function(e){if(dist.Assert.exists(e))return new Promise((function(t,n){var r=new window.FileReader;r.onloadend=function(){return t(r.result)},r.onerror=function(){n(r.error),r.abort()},r.readAsDataURL(e)}));throw new Error("Cannot convert src to dataUrl with src: ".concat(t))}))}function dataUrlFromFile(t,e){return new Promise((function(n,r){var i=new window.FileReader;i.onload=function(t){dataUrlFromSrc(t.target.result,e).then((function(t){return n(t)})).catch((function(t){return r(t)}))},i.onerror=function(t){return r(t)},i.readAsDataURL(t)}))}function blobFromFile(t,e){return new Promise((function(n,r){var i=new window.FileReader;i.onload=function(i){blobFromSrc(i.target.result,e).then((function(e){e.lastModified=t.lastModified,e.lastModifiedDate=t.lastModifiedDate,e.name=t.name,n(e)})).catch((function(t){return r(t)}))},i.onerror=function(t){return r(t)},i.readAsDataURL(t)}))}var index$2=Object.freeze({__proto__:null,blobFromSrc:blobFromSrc,dataUrlFromSrc:dataUrlFromSrc,dataUrlFromFile:dataUrlFromFile,blobFromFile:blobFromFile});exports.BinaryFile=BinaryFile,exports.blob=index,exports.exif=index$1,exports.image=index$2,Object.defineProperty(exports,"__esModule",{value:!0})}));
